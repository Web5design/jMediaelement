(function(e){e.webshims=e.webshims||{ready:function(e,t){t()},addReady:function(t){e(function(){t(document,e([]))})}};var t=e.webshims;window.Modernizr&&"opacity"in Modernizr||e("html").addClass(e.support.opacity?"opacity":"no-opacity");var n={},i={},a=!1;e(window).on("load",function(){a=!0;var t,n=function(){a=!0};e(window).on("scroll",function(){a=!1,clearTimeout(t),t=setTimeout(n,999)})}),e.jme={version:"2.0.5",classNS:"",options:{},plugins:{},data:function(t,n,i){var a=e(t).data(u+"jme")||e.data(t,u+"jme",{});return void 0===i?n?a[n]:a:(a[n]=i,void 0)},registerPlugin:function(e,t){this.plugins[e]=t,t.nodeName||(t.nodeName=""),t.className||(t.className=e)},defineMethod:function(e,t){i[e]=t},defineProp:function(t,i){i||(i={}),i.set||(i.set=i.readonly?function(){throw t+" is readonly"}:e.noop),i.get||(i.get=function(n){return e.jme.data(n,t)}),n[t]=i},prop:function(t,i,a){if(!n[i])return e.prop(t,i,a);if(void 0===a)return n[i].get(t);var r=n[i].set(t,a);void 0===r&&(r=a),"noDataSet"!=r&&e.jme.data(t,i,r)},setText:function(t,n){var i=t;t&&n&&(i={},i[t]=n),e.each(i,function(t,n){e.jme.plugins[t]&&(e.jme.plugins[t].text=n)})}};var r=!0;try{e.access(e(document.documentElement),"t",void 0,!0,e.noop)}catch(s){r=!1}e.fn.jmeProp=r?function(t,n){return e.access(this,t,n,!0,e.jme.prop)}:function(t,n){return e.access(this,e.jme.prop,t,n,arguments.length>1)},e.fn.jmeFn=function(t){var n,a=Array.prototype.slice.call(arguments,1);return this.each(function(){return n=(i[t]||e.prop(this,t)).apply(this,a),void 0!==n?!1:void 0}),void 0!==n?n:this};var o,l=[],u="";e.jme.createSelectors=function(){o||(u=e.jme.classNS,o="div."+u+"mediaplayer",e.each(e.jme.plugins,function(t,n){n.className=u+n.className,n.selector=n.nodeName+"."+n.className,l.push(n.selector),u&&n.pseudoClasses&&e.each(n.pseudoClasses,function(e,t){n.pseudoClasses[e]=u+t})}),l=l.join(","))},e.jme.initJME=function(t,n){e("video, audio",t).add(n.filter("video, audio")).filter("[data-muted]").each(function(){e.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var t=e(this).data("volume");1>=t&&t>=0&&e.prop(this,"volume",t)}),e(o,t).add(n.filter(o)).jmePlayer()};var c={emptied:1,pause:1};e.jme.getDOMList=function(t){var n=[];return t||(t=[]),"string"==typeof t&&(t=t.split(" ")),e.each(t,function(e,t){t&&(t=document.getElementById(t),t&&n.push(t))}),n},t.ready("dom-support",function(){t.defineNodeNamesProperty&&!e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var t=[],n=this.id;return n&&(t=e('label[for="'+n+'"]')),t[0]||(t=e(this).closest("label",this.form)),t.get()},writeable:!1}})}),e.jme.getButtonText=function(t,n){var i=e("span.jme-text, +label span.jme-text",t),a=t.prop("labels");a=a&&a[0]?e(a).eq(0):!1,i[0]||(i=a||t);var r,s,o,l,u=i.text().split("/"),c=t.prop("title").split("/"),d=function(c){l!==c&&(l=c,s&&i.text(u[c||0]),o&&(t.prop("title",u[c||0]),a&&a.prop("title",u[c||0])),n&&t.removeClass(n[c?0:1]).addClass(n[c]),r&&(t.prop("checked",!!c),(t.data("checkboxradio")||{refresh:e.noop}).refresh()))};return 2==u.length&&(u[0]=u[0].trim(),u[1]=u[1].trim(),s=!0),2==c.length&&(c[0]=c[0].trim(),c[1]=c[1].trim(),o=!0),t.is('[type="checkbox"], [type="radio"]')?(t.prop("checked",function(){return this.defaultChecked}),r=!0):t.is("a")&&t.bind("click",function(e){e.preventDefault()}),d},e.fn.jmePlayer=function(t){var n=["idle","playing","ended","waiting","mediaerror"].map(function(e){return u+"state-"+e}).join(" ");return this.each(function(){t&&e.jme.data(this,e.extend(!0,{},t));var i,r,s,o,d,m,p,f,h=e("audio, video",this).filter(":first"),v=e(this),g=e(l,v),y=e.jme.getDOMList(e.jme.data(this,"controls")),j=g.add(e(y)),b=e.jme.data(this),w=e.jme.data(h[0]);w.player=v,w.media=h,b.media||(r=!0,f=!h.prop("autoplay"),m=function(){h.unbind("canplay",d),clearTimeout(p)},d=function(){var t=e.prop(this,"paused")?"idle":"playing";v.removeClass(n).addClass(u+"state-"+t)},i=function(t){var i,a,r=t.type;m(),"ended"==r||e.prop(this,"ended")?r="ended":"waiting"==r?e.prop(this,"readyState")>2?r="":(p=setTimeout(function(){h.prop("readyState")>2&&d()},9),h.bind("canPlay",d)):c[r]?r="idle":(i=e.prop(this,"readyState"),a=e.prop(this,"paused"),r=!a&&3>i?"waiting":!a&&i>2?"playing":"idle"),r&&v.removeClass(n).addClass(u+"state-"+r)},b.media=h,b.player=v,h.bind("ended",function(){m(),h.jmeFn("pause"),h.prop("autoplay")||h.prop("loop")||h.hasClass("no-reload")||h.jmeFn("load")}).bind("emptied waiting canplay canplaythrough playing ended pause mediaerror",i).bind("volumechange updateJMEState",function(){var t=e.prop(this,"volume");v[!t||e.prop(this,"muted")?"addClass":"removeClass"](u+"state-muted"),t=.34>t?"low":.67>t?"medium":"high",v.attr("data-volume",t)}).bind("emptied updateJMEState play playing waiting",function(t){var n;"emptied"==t.type||"updateJMEState"==t.type&&e.prop(this,"paused")?("emptied"==t.type&&(f=!h.prop("autoplay")),n="addClass"):("play"==t.type||"waiting"==t.type||"playing"==t.type)&&(n="removeClass"),n&&v[n](u+"state-initial")}),v.addClass(u+"userinactive").on({useractive:function(){v.addClass(u+"useractive").removeClass(u+"userinactive")},focusin:function(){clearTimeout(s),v.addClass(u+"focusenter")},focusout:function(){clearTimeout(s),s=setTimeout(function(){v.removeClass(u+"focusenter")},1)},"mouseenter focusin":function(){clearTimeout(o),v.addClass(u+"fover"),f&&a&&(h.prop("preload","auto"),f=!1)},"mouseleave focusout":function(){clearTimeout(o),o=setTimeout(function(){v.removeClass(u+"fover")},1)}}).on("userinactive",{idletime:3500},function(){v.removeClass(u+"useractive").addClass(u+"userinactive")})),v.jmeFn("addControls",j),r&&(b.controlbar&&v.jmeProp("controlbar",!0),i&&h.bind("updateJMEState",i).triggerHandler("updateJMEState"))})},e.jme.defineProp("isPlaying",{get:function(t){return!e.prop(t,"ended")&&!e.prop(t,"paused")&&e.prop(t,"readyState")>1&&!e.data(t,"mediaerror")},readonly:!0}),e.jme.defineProp("player",{readonly:!0}),e.jme.defineProp("media",{readonly:!0}),e.jme.defineProp("srces",{get:function(t){var n=e.jme.data(t),i=n.media.prop("src"),a=[];return i?[{src:i}]:a=e.map(e("source",n.media).get(),function(t){var n={src:e.prop(t,"src")},i=e.attr(t,"media");return i&&(n.media=i),i=e.attr(t,"type"),i&&(n.type=i),n})},set:function(t,n){var i=e.jme.data(t),a=function(t,n){"string"==typeof n&&(n={src:n}),e(document.createElement("source")).attr(n).appendTo(i.media)};return i.media.removeAttr("src").find("source").remove(),e.isArray(n)?e.each(n,a):a(0,n),i.media.jmeFn("load"),"noDataSet"}}),e.jme.defineMethod("togglePlay",function(){e(this).jmeFn(n.isPlaying.get(this)?"pause":"play")}),e.jme.defineProp("controlbar",{set:function(t,n){n=!!n;var i,a=e.jme.data(t),r=e("div.jme-default-media-overlay, div.jme-default-control-bar",a.player),s=e.jme.plugins["media-controls"],o="";return n&&!r[0]?a._controlbar?a._controlbar.appendTo(a.player):(a.media.prop("controls",!1),e.each(s.pluginOrder,function(t,n){var i=e.jme.plugins[n];i&&i.structure?o+=i.structure.replace("{%class%}",u+n).replace("{%text%}",i.text||""):n&&(o+=n)}),a._controlbar=e(s.barStructure),r=a._controlbar.find("div.jme-cb-box").addClass(u+"media-controls"),i=a._controlbar.filter(".jme-default-media-overlay").addClass(u+"play-pause"),i=i.add(r),i=i.add(e(o).appendTo(r)),a._controlbar.appendTo(a.player),a.player.jmeFn("addControls",i)):n||r.detach(),r=null,i=null,n}}),e.jme.defineMethod("addControls",function(t){var n=e.jme.data(this)||{};if(n.media){var i=e.jme.data(n.player[0],"controlElements")||e([]);t=e(t),e.each(e.jme.plugins,function(i,a){t.filter("."+a.className).add(t.find("."+a.className)).each(function(){var t=e(this),i=e.jme.data(this);i.player=n.player,i.media=n.media,i.rendered||(i.rendered=!0,a.options&&e.each(a.options,function(e,t){e in i||(i[e]=t)}),a._create(t,n.media,n.player,i),t=null)})}),e.jme.data(n.player[0],"controlElements",i.add(t)),n.player.triggerHandler("controlsadded")}}),e.jme.defineMethod("updateControlbar",function(){var t=e("."+e.jme.classNS+"time-slider",this);if(t[0]&&"absolute"!==t.css("position")){var n=Math.floor(t.parent().width())-.2,i=0;t.hide().siblings().each(function(){this!==t[0]&&"absolute"!==e.css(this,"position")&&"none"!==e.css(this,"display")&&(i+=Math.ceil(e(this).outerWidth(!0))+.1)}).end().show(),t.width(Math.floor(n-i-Math.ceil(t.outerWidth(!0)-t.width())-.3))}}),e.jme.registerPlugin("media-controls",{pluginOrder:["play-pause",'<div class="media-bar">',"currenttime-display","time-slider","duration-display",'<div class="volume-controls">',"mute-unmute","volume-slider","</div>","fullscreen",'<div class="subtitle-controls">',"captions","</div>","</div>"],barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar" tabindex="-1"><div class="jme-cb-box"></div></div>',_create:function(t,n,i){var a,r=function(){clearTimeout(a),t.jmeFn("updateControlbar"),a=setTimeout(function(){t.jmeFn("updateControlbar")},9)};setTimeout(function(){n.bind("loadedmetadata volumechange play pause ended emptied",r),i.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",r),e(window).bind("resize emchange",r)},1),r()}}),function(){var t={add:function(t,n,i){var a,r,s=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),o=e(t),l=function(){s.idle||(s.idle=!0,s.trigger.userinactive&&o.trigger("userinactive"))},u=function(e){!e||"mousemove"===e.type&&e.pageX===a&&e.pageY===r||("mousemove"===e.type&&(a=e.pageX,r=e.pageY),s.idleTimer&&clearTimeout(s.idleTimer),s.idleTimer=setTimeout(l,s.idletime),s.idle&&(s.idle=!1,s.trigger.useractive&&o.trigger("useractive")))};s.idletime=(n||{}).idletime||s.idletime,n&&"idle"in n&&(s.idle=n.idle),s.trigger[i]=!0,s.bound||(o.bind("mouseleave.jmeuseractivity",l).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",u),s.bound=!0),s.idle||u({type:"initunidled"})},remove:function(t,n){var i=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});i.trigger[n]=!1,i.trigger.useractive||i.trigger.userinactive||(e(t).unbind(".jmeuseractivity"),i.bound=!1)}};e.each(["useractive","userinactive"],function(n,i){e.event.special[i]={setup:function(e){t.add(this,e,i)},teardown:function(){t.remove(this,i)}}})}()})(jQuery),function(e){function t(e,t){var n,i,a;return{get:function(){return a?void 0:e.apply(this,arguments)},set:function(){clearTimeout(n),clearTimeout(i);var e=this,r=arguments;a=!0,n=setTimeout(function(){t.apply(e,r),i=setTimeout(function(){a=!1},30)},0)}}}var n="pseudoClasses",i={play:1,playing:1},a={pause:1,ended:1},r=!(Modernizr.boxSizing||Modernizr["display-table"]||Modernizr.video||e.support.getSetAttribute),s=function(){e.webshims.loader&&!s.rangeType&&(!e.webshims.modules["range-ui"]||e.fn.slider?(e.webshims.loader.loadList(["jquery-ui"]),e.webshims.modules["input-widgets"].src&&e.webshims.loader.loadList(["input-widgets"])):e.webshims.modules["range-ui"]&&(s.rangeType="rangeui",e.webshims.loader.loadList(["range-ui"]))),s.rangeType||(s.rangeType="jqueryui")},o=function(t){var n;s(),"jqueryui"==s.rangeType?(n=function(){e.fn._uiSlider||(e.mobile&&e.mobile.slider?e.widget("jme._uiSlider",e.ui.slider.prototype):e.fn._uiSlider=e.fn.slider),t()},e.webshims.ready("jquery-ui",function(){e.ui&&e.ui.slider?n():e.webshims.ready("input-widgets",n)})):e.webshims.ready("range-ui",t)},l='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',u='<div  class="{%class%}"></div>',c='<div class="{%class%}"></div>';e.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:l,text:"play / pause",_create:function(t,r){var s=e.jme.getButtonText(t,[this[n].play,this[n].pause]);r.bind("play playing ended pause updateJMEState",function(e){var t=e.type;t=i[t]?1:a[t]?0:r.jmeProp("isPlaying")?1:0,s(t)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){r.jmeFn("togglePlay"),e.stopPropagation()})}}),e.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:l,text:"mute / unmute",_create:function(t,i){var a=e.jme.getButtonText(t,[this[n].mute,this[n].unmute]);i.bind("volumechange updateJMEState",function(){a(i.prop("muted")?1:0)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){i.prop("muted",!i.prop("muted")),e.stopPropagation()})}}),e.jme.registerPlugin("volume-slider",{structure:c,_create:function(e,n){s();var i=function(){var i,a;"jqueryui"==s.rangeType?(a=t(function(){var t=n.prop("volume");void 0!==t&&e._uiSlider("value",t)},function(e){n.prop({muted:!1,volume:e})}),e.html('<div class="slider-rail"><a href="#" class="ui-slider-handle"></a></div>')._uiSlider({range:"min",max:1,step:.05,value:n.prop("volume"),slide:function(e,t){e.originalEvent&&a.set(t.value)}})):(a=t(function(){var e=n.prop("volume");void 0!==e&&i.value(e)},function(){n.prop({muted:!1,volume:i.options.value})}),i=e.rangeUI({min:0,max:1,step:"any",input:function(){a.set()}}).data("rangeUi")),n.bind("volumechange",a.get)};o(i)}}),e.jme.registerPlugin("time-slider",{structure:c,pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(i,a,l){s();var u=this,c=function(){var o,c,d,m,p,p=e.jme.classNS+"has-duration";e.jme.classNS+"no-duration";var f=a.prop("duration");"jqueryui"==s.rangeType?(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{i._uiSlider("value",e)}catch(t){}},function(e){try{a.prop("currentTime",e).triggerHandler("timechanged",[e])}catch(t){}}),c=function(){f=a.prop("duration"),f&&isFinite(f)&&!isNaN(f)?(i._uiSlider("option","disabled",!1)._uiSlider("option","max",f),l.removeClass(u[n].no)):(i._uiSlider("option","disabled",!0),i._uiSlider("value",0),l.addClass(u[n].no))},i._uiSlider({range:r?!1:"min",step:.1,value:a.prop("currentTime"),slide:function(e,t){e.originalEvent&&o.set(t.value)}}),a.bind({timeupdate:o.get,emptied:function(){c(),i._uiSlider("value",0)},durationchange:c})):(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{d.value(e)}catch(t){}},function(){try{a.prop("currentTime",d.options.value).triggerHandler("timechanged",[d.options.value])}catch(e){}}),c=function(){f=a.prop("duration"),p=f&&isFinite(f)&&!isNaN(f),p?(d.disabled(!1),d.max(f),l.removeClass(u[n].no)):(d.disabled(!0),d.max(Number.MAX_VALUE),l.addClass(u[n].no))},d=i.rangeUI({min:0,value:a.prop("currentTime")||0,step:"any",input:function(){o.set()},textValue:function(e){return a.jmeFn("formatTime",e)}}).data("rangeUi"),m=e('<span class="'+e.jme.classNS+'time-select" />').appendTo(i),i.on({mouseenter:function(t){if(p){var n=(i.offset()||{left:0}).left,r=i.innerWidth(),s=function(e){var t=100*((e-n)/r);m.html(a.jmeFn("formatTime",f*t/100)).css({left:t+"%"})};s(t.pageX),m.addClass(e.jme.classNS+"show-time-select"),i.off(".jmetimeselect").on("mousemove.jmetimeselect",function(e){s(e.pageX)})}},mouseleave:function(){m.removeClass(e.jme.classNS+"show-time-select"),i.off(".jmetimeselect")}}),a.bind({timeupdate:o.get,emptied:function(){c(),d.value(0)},durationchange:c})),l.jmeFn("addControls",e('<div class="'+e.jme.classNS+'buffer-progress" />').prependTo(i)),c()};o(c)}}),e.jme.defineMethod("concerningRange",function(t,n){var i=this,a={start:0,end:0};if(t||(t="buffered"),t=e.prop(i,t),null==n&&(n=e.prop(i,"currentTime")),!(t&&"length"in t))return a;for(var r=0,s=t.length;s>r&&(a.start=t.start(r),a.end=t.end(r),!(n>=a.start&&a.end>=n));r++);return a}),e.jme.defineProp("progress",{get:function(t){var n=e.jme.data(t);if(!n.media)return 0;var i=100*(n.media.jmeFn("concerningRange").end/n.media.prop("duration"));return i>99.4&&(i=100),i||0},readonly:!0}),e.jme.registerPlugin("buffer-progress",{_create:function(t,n,i,a){var r=e('<div class="'+e.jme.classNS+'buffer-progress-indicator" />').appendTo(t),s=function(){var e=n.jmeProp("progress");a.progress!==e&&(a.progress=e,r.css("width",e+"%"))};n.bind({progress:s,emptied:function(){r.css("width",0),a.progress=0},playing:s}),s()}});var d={hh:6e4,mm:60,ss:1,ms:.001},m=function(t,n){var i;n||(n=["mm","ss"]),null==t&&(i=e.jme.data(this),t=e.prop(i.media,"duration")),t||(t=0);for(var a,r=[],s=0,o=n.length;o>s;s++)"ms"==n[s]&&s==o-1?a=Math.round(t/d[n[s]]/10):(a=parseInt(t/d[n[s]],10),t%=d[n[s]]),10>a&&(a="0"+a),r.push(a);return r.join(":")};e.jme.defineMethod("formatTime",m),e.jme.defineProp("format",{set:function(t,n){e.isArray(n)||(n=n.split(":"));var i=e.jme.data(t);return i.format=n,e(t).triggerHandler("updatetimeformat"),i.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("duration-display",{structure:u,options:{format:"mm:ss"},_create:function(e,t,n,i){"string"==typeof i.format&&(i.format=i.format.split(":"));var a=function(){e.html(m(t.prop("duration"),i.format))};t.bind("durationchange emptied",a),e.bind("updatetimeformat",a).jmeProp("format",i.format)}}),e.jme.defineProp("countdown",{set:function(t,n){var i=e.jme.data(t);return i.countdown=!!n,e(t).triggerHandler("updatetimeformat"),i.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("currenttime-display",{structure:u,options:{format:"mm:ss",countdown:!1},_create:function(e,t,n,i){"string"==typeof i.format&&(i.format=i.format.split(":"));var a=function(){var n=t.prop("currentTime");i.countdown&&(n=(t.prop("duration")||0)-n,.7>n&&(n=0)),e.html(m(n,i.format))};t.bind("timeupdate emptied durationchange",a),e.bind("updatetimeformat",a).jmeProp("format",i.format)}}),e.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(t,n){var i=function(){var i=n.prop("poster");i?t.html('<span></span><img src="'+i+'" class="'+e.jme.classNS+'poster-image" />'):t.empty()};n.bind("emptied",i),i()}})}(jQuery),function(e){var t;e.jme.startJME=function(){if(!t){var n;(n=e.webshims.modules)&&n["range-ui"]&&setTimeout(function(){e.fn.slider||e.webshims.loader.loadList(["range-ui"])},9),e(function(){e.jme.createSelectors(),e.jme.initJME(document,e([]))}),e.webshims.ready("mediaelement",function(){e.webshims.addReady(function(t,n){t!==document&&e.jme.initJME(t,n)})}),t=!0}}}(jQuery),function(e){var t='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',n="pseudoClasses";e.jme.fullscreen=function(){var t,n,i=document.documentElement,a={supportsFullScreen:Modernizr.prefixed("fullscreenEnabled",document,!1)||Modernizr.prefixed("fullScreenEnabled",document,!1),isFullScreen:function(){return!1},requestFullScreen:function(i){var a;t=[],e(i).parentsUntil("body").each(function(){var n,i=e.css(this,"position"),r=this.scrollLeft,s=this.scrollTop;a={elemStyle:this.style,elem:this},"static"!==i&&(n=!0,a.pos=a.elemStyle.position,this.style.position="static"),r&&(n=!0,a.left=r),s&&(n=!0,a.top=s),n&&t.push(a)}),n=!1;try{n={elemStyle:frameElement.style,elem:frameElement,css:{}},n.css.position=n.elemStyle.position,n.elemStyle.position="fixed",e.each(["top","left","right","bottom"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="0px"}),e.each(["height","width"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="100%"})}catch(r){n=!1}a=null},cancelFullScreen:function(){t&&(e.each(t,function(e,t){"pos"in t&&(t.elemStyle.position=t.pos),t.left&&(t.elem.scrollLeft=t.left),t.top&&(t.elem.scrollTop=t.top),t=null}),t=[]),n&&(e.each(n.css,function(e,t){n.elemStyle[e]=t}),n=!1)},eventName:"fullscreenchange",exitName:"exitFullscreen",requestName:"requestFullscreen",elementName:"fullscreenElement",enabledName:""};return a.cancelFullWindow=a.cancelFullScreen,a.requestFullWindow=a.requestFullScreen,a.supportsFullScreen&&(a.enabledName=a.supportsFullScreen,a.exitName=Modernizr.prefixed("exitFullscreen",document,!1)||Modernizr.prefixed("cancelFullScreen",document,!1),a.elementName=Modernizr.prefixed("fullscreenElement",document,!1)||Modernizr.prefixed("fullScreenElement",document,!1),a.supportsFullScreen=!!a.supportsFullScreen,("fullscreenElement"!=a.elementName||"exitFullscreen"!=a.exitName||"fullscreenEnabled"!=a.enabledName)&&e.each(Modernizr._domPrefixes,function(e,t){var n=t+"RequestFullscreen";return n in i||(n=t+"RequestFullScreen")&&n in i?(a.eventName=t+"fullscreenchange",a.requestName=n,!1):void 0}),a.isFullScreen=function(){return document[a.elementName]},a.requestFullScreen=function(e){return e[a.requestName]()},a.cancelFullScreen=function(){return document[a.exitName]()}),window.Modernizr&&"fullscreen"in Modernizr||e("html").addClass(a.supportsFullScreen?"fullscreen":"no-fullscreen"),window.parent!=window&&function(){try{var t=window.frameElement;t.style,a.supportsFullScreen&&("allowfullscreen"in t&&!t.allowfullscreen?t.allowfullscreen=!0:(null==t.getAttribute("webkitallowfullscreen")&&t.setAttribute("webkitallowfullscreen",""),null==t.getAttribute("allowfullscreen")&&t.setAttribute("allowfullscreen","allowfullscreen")))}catch(n){a.supportsFullScreen||e("html").addClass("no-fullwindow")}}(),a}(),e.jme.defineProp("fullscreen",{set:function(t,n){var i=e.jme.data(t);if(!i||!i.player)return"noDataSet";if(n){if(i.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(i.scrollPos={top:e(window).scrollTop(),left:e(window).scrollLeft()},e(document).unbind(".jmefullscreen").bind("keydown.jmefullscreen",function(e){return 27==e.keyCode?(i.player.jmeProp("fullscreen",!1),!1):32!==e.keyCode||"form"in e.target?void 0:(i.media.jmeFn("togglePlay"),!1)}),"fullwindow"==n)e.jme.fullscreen.requestFullWindow(i.player[0]);else try{e.jme.fullscreen.requestFullScreen(i.player[0])}catch(a){}e("html").addClass(e.jme.classNS+"has-media-fullscreen"),i.player.addClass(e.jme.classNS+"player-fullscreen"),i.media.addClass(e.jme.classNS+"media-fullscreen"),e(".jme-default-control-bar",i.player).focus(),e.jme.fullscreen.supportsFullScreen&&e(document).bind(e.jme.fullscreen.eventName+".jmefullscreen",function(){var n=e.jme.fullscreen.isFullScreen();n&&t==n?e(t).triggerHandler("playerdimensionchange",["fullscreen"]):i.player.jmeProp("fullscreen",!1)}),i.player.triggerHandler("playerdimensionchange",["fullwindow"])}else{if(!i.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(e(document).unbind(".jmefullscreen"),e("html").removeClass(e.jme.classNS+"has-media-fullscreen"),i.player.removeClass(e.jme.classNS+"player-fullscreen"),i.media.removeClass(e.jme.classNS+"media-fullscreen"),e.jme.fullscreen.isFullScreen())try{e.jme.fullscreen.cancelFullScreen()}catch(a){}else e.jme.fullscreen.cancelFullWindow();i.player.triggerHandler("playerdimensionchange"),i.scrollPos&&(e(window).scrollTop(i.scrollPos.top),e(window).scrollLeft(i.scrollPos.left),delete i.scrollPos)}return"noDataSet"},get:function(t){var n=e.jme.data(t);if(n&&n.player){var i=n.player.hasClass(e.jme.classNS+"player-fullscreen");return i?e.jme.fullscreen.isFullScreen()||"fullwindow":!1}}}),e.jme.defineProp("autoplayfs"),e.jme.registerPlugin("fullscreen",{pseudoClasses:{enter:"state-enterfullscreen",exit:"state-exitfullscreen"},options:{fullscreen:!0,autoplayfs:!1},structure:t,text:"enter fullscreen / exit fullscreen",_create:function(t,i,a){var r=e.jme.getButtonText(t,[this[n].enter,this[n].exit]),s=function(){r(a.hasClass(e.jme.classNS+"player-fullscreen")?1:0)},o=this.options,l=function(){e(a.data("jme").controlElements).filter(".jme-default-media-overlay").off(".dblfullscreen").on("dblclick.dblfullscreen",function(){a.jmeProp("fullscreen",!a.jmeProp("fullscreen"))})};a.on("controlsadded",l),a.bind("playerdimensionchange",s),t.bind(t.is("select")?"change":"click",function(){var t=a.hasClass(e.jme.classNS+"player-fullscreen")?!1:o.fullscreen;a.jmeProp("fullscreen",t),t&&o.autoplayfs&&i.jmeFn("play")}),l(),s()}})}(jQuery),function(e){var t='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',n="pseudoClasses";e.jme.ButtonMenu=function(t,n,i){this.button=e(t).attr({"aria-haspopup":"true"}),this.clickHandler=i,this.toggle=e.proxy(this,"toggle"),this.keyIndex=e.proxy(this,"keyIndex"),this._buttonClick=e.proxy(this,"_buttonClick"),this.addMenu(n),this._closeFocusOut(),this.button.bind("click",this.toggle)},e.jme.ButtonMenu.prototype={addMenu:function(t){this.menu&&this.menu.remove(),this.menu=e(t),this.buttons=e("button",this.menu),this.menu.insertAfter(this.button),this.menu.bind("keydown",this.keyIndex).delegate("button","click",this._buttonClick)},_closeFocusOut:function(){var e,t=this,n=function(){clearTimeout(e),setTimeout(function(){clearTimeout(e)},9)};this.menu.parent().bind("focusin",n).bind("mousedown",n).bind("focusout",function(){e=setTimeout(function(){t.hide()},40)})},_buttonClick:function(e){this.clickHandler(this.buttons.index(e.currentTarget),e.currentTarget),this.hide()},keyIndex:function(e){var t=40==e.keyCode?1:38==e.keyCode?-1:0;if(t){var n=this.buttons.not(":disabled"),i=n.filter(":focus");i=n[n.index(i)+t]||n.filter(t>0?":first":":last"),i.focus(),e.preventDefault()}},show:function(){if(!this.isVisible){var t=this.buttons.not(":disabled");this.isVisible=!0,this.menu.addClass("visible-menu");try{this.activeElement=document.activeElement||this.button[0]}catch(n){this.activeElement=this.button[0]}setTimeout(function(){e(t.filter('[aria-checked="true"]')[0]||t[0]).focus()},60)}},toggle:function(){this[this.isVisible?"hide":"show"]()},hide:function(){if(this.isVisible){if(this.isVisible=!1,this.menu.removeClass("visible-menu"),this.activeElement)try{this.activeElement.focus()}catch(e){}this.activeElement=!1}}};var i={subtitles:1,caption:1},a=function(t){var n=e.map(t,function(e){var t="caption"==e.kind?"caption-type":"subtitle-type",n=e.language;return n=n?' <span class="track-lang">'+n+"</span>":"",'<li class="'+t+'" role="presentation"><button role="menuitemcheckbox">'+e.label+n+"</button></li>"});return"<div><ul>"+n.join("")+"</ul></div>"};e.jme.registerPlugin("captions",{pseudoClasses:{enabled:"state-captionsenabled",disabled:"state-captionsdisabled",noTrack:"no-track",hasTrack:"has-track",menu:"subtitle-menu"},structure:t,text:"subtitles menu",_create:function(t,r,s){var o=this,l=r.find("track"),u=e("span.jme-text, +label span.jme-text",t);u[0]||(u=t),u.html(o.text),l.length?s.addClass(o[n].hasTrack):(t.prop("disabled",!0),s.addClass(o[n].noTrack)),e.webshims.ready("track",function(){function l(n){d?d.addMenu(n):d=new e.jme.ButtonMenu(t,n,function(t,n){"true"==e.attr(n,"aria-checked")?m[t].mode="disabled":e.each(m,function(e,n){n.mode=e==t?"showing":"disabled"}),r.prop("textTracks"),u()}),u()}function u(){e("button",d.menu).each(function(t){e.attr(this,"aria-checked","showing"==m[t].mode?"true":"false")})}function c(){m=[],e.each(p,function(e,t){i[t.kind]&&3!=t.readyState&&m.push(t)}),m.length?(l('<div class="'+o[n].menu+'" >'+a(m)+"</div>"),(!s.hasClass(o[n].hasTrack)||s.hasClass(o[n].noTrack))&&(t.prop("disabled",!1),s.addClass(o[n].hasTrack).removeClass(o[n].noTrack).triggerHandler("controlschanged"))):(!s.hasClass(o[n].noTrack)||s.hasClass(o[n].hasTrack))&&(t.prop("disabled",!0),s.addClass(o[n].noTrack).removeClass(o[n].hasTrack).triggerHandler("controlschanged"))}var d,m=[],p=r.prop("textTracks"),f=function(){var e,t;return function(n){clearTimeout(e),clearTimeout(t),"updatesubtitlestate"==n.type&&(t=setTimeout(function(){r.trigger("updatetracklist")},0)),e=setTimeout(c,19)}}();p?(c(),e([p]).on("addtrack removetrack",f),s.bind("updatesubtitlestate",f),r.bind("updatetrackdisplay",function(){var e;return function(){clearTimeout(e),e=setTimeout(u,20)}}())):(p=[],c())})}})}(jQuery);