(function(e){e.webshims=e.webshims||{ready:function(e,t){t()},addReady:function(t){e(function(){t(document,e([]))})}};var t=e.webshims;window.Modernizr&&"opacity"in Modernizr||e("html").addClass(e.support.opacity?"opacity":"no-opacity");var i={},n={};e.jme={version:"2.0.4",classNS:"",options:{},plugins:{},data:function(t,i,n){var a=e(t).data(u+"jme")||e.data(t,u+"jme",{});return void 0===n?i?a[i]:a:(a[i]=n,void 0)},registerPlugin:function(e,t){this.plugins[e]=t,t.nodeName||(t.nodeName=""),t.className||(t.className=e)},defineMethod:function(e,t){n[e]=t},defineProp:function(t,n){n||(n={}),n.set||(n.set=n.readonly?function(){throw t+" is readonly"}:e.noop),n.get||(n.get=function(i){return e.jme.data(i,t)}),i[t]=n},prop:function(t,n,a){if(!i[n])return e.prop(t,n,a);if(void 0===a)return i[n].get(t);var r=i[n].set(t,a);void 0===r&&(r=a),"noDataSet"!=r&&e.jme.data(t,n,r)},setText:function(t,i){var n=t;t&&i&&(n={},n[t]=i),e.each(n,function(t,i){e.jme.plugins[t]&&(e.jme.plugins[t].text=i)})}};var a=!0;try{e.access(e(document.documentElement),"t",void 0,!0,e.noop)}catch(r){a=!1}e.fn.jmeProp=a?function(t,i){return e.access(this,t,i,!0,e.jme.prop)}:function(t,i){return e.access(this,e.jme.prop,t,i,arguments.length>1)},e.fn.jmeFn=function(t){var i,a=Array.prototype.slice.call(arguments,1);return this.each(function(){return i=(n[t]||e.prop(this,t)).apply(this,a),void 0!==i?!1:void 0}),void 0!==i?i:this};var s,o=[],u="";e.jme.createSelectors=function(){s||(u=e.jme.classNS,s="div."+u+"mediaplayer",e.each(e.jme.plugins,function(t,i){i.className=u+i.className,i.selector=i.nodeName+"."+i.className,o.push(i.selector),u&&i.pseudoClasses&&e.each(i.pseudoClasses,function(e,t){i.pseudoClasses[e]=u+t})}),o=o.join(","))},e.jme.initJME=function(t,i){e("video, audio",t).add(i.filter("video, audio")).filter("[data-muted]").each(function(){e.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var t=e(this).data("volume");1>=t&&t>=0&&e.prop(this,"volume",t)}),e(s,t).add(i.filter(s)).jmePlayer()};var l={emptied:1,pause:1};e.jme.getDOMList=function(t){var i=[];return t||(t=[]),"string"==typeof t&&(t=t.split(" ")),e.each(t,function(e,t){t&&(t=document.getElementById(t),t&&i.push(t))}),i},t.ready("dom-support",function(){t.defineNodeNamesProperty&&!e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var t=[],i=this.id;return i&&(t=e('label[for="'+i+'"]')),t[0]||(t=e(this).closest("label",this.form)),t.get()},writeable:!1}})}),e.jme.getButtonText=function(t,i){var n=e("span.jme-text, +label span.jme-text",t),a=t.prop("labels");a=a&&a[0]?e(a).eq(0):!1,n[0]||(n=a||t);var r,s,o,u,l=n.text().split("/"),d=t.prop("title").split("/"),c=function(d){u!==d&&(u=d,s&&n.text(l[d||0]),o&&(t.prop("title",l[d||0]),a&&a.prop("title",l[d||0])),i&&t.removeClass(i[d?0:1]).addClass(i[d]),r&&(t.prop("checked",!!d),(t.data("checkboxradio")||{refresh:e.noop}).refresh()))};return 2==l.length&&(l[0]=l[0].trim(),l[1]=l[1].trim(),s=!0),2==d.length&&(d[0]=d[0].trim(),d[1]=d[1].trim(),o=!0),t.is('[type="checkbox"], [type="radio"]')?(t.prop("checked",function(){return this.defaultChecked}),r=!0):t.is("a")&&t.bind("click",function(e){e.preventDefault()}),c},e.fn.jmePlayer=function(t){var i=["idle","playing","ended","waiting","mediaerror"].map(function(e){return u+"state-"+e}).join(" ");return this.each(function(){t&&e.jme.data(this,e.extend(!0,{},t));var n,a,r,s,d,c,m,p,f=e("audio, video",this).filter(":first"),v=e(this),g=e(o,v),h=e.jme.getDOMList(e.jme.data(this,"controls")),y=g.add(e(h)),j=e.jme.data(this),b=e.jme.data(f[0]);b.player=v,b.media=f,j.media||(a=!0,p=!f.prop("autoplay"),c=function(){f.unbind("canplay",d),clearTimeout(m)},d=function(){var t=e.prop(this,"paused")?"idle":"playing";v.removeClass(i).addClass(u+"state-"+t)},n=function(t){var n,a,r=t.type;c(),"ended"==r||e.prop(this,"ended")?r="ended":"waiting"==r?e.prop(this,"readyState")>2?r="":(m=setTimeout(function(){f.prop("readyState")>2&&d()},9),f.bind("canPlay",d)):l[r]?r="idle":(n=e.prop(this,"readyState"),a=e.prop(this,"paused"),r=!a&&3>n?"waiting":!a&&n>2?"playing":"idle"),r&&v.removeClass(i).addClass(u+"state-"+r)},j.media=f,j.player=v,f.bind("ended",function(){c(),f.jmeFn("pause"),f.prop("autoplay")||f.prop("loop")||f.hasClass("no-reload")||f.jmeFn("load")}).bind("emptied waiting canplay canplaythrough playing ended pause mediaerror",n).bind("volumechange updateJMEState",function(){var t=e.prop(this,"volume");v[!t||e.prop(this,"muted")?"addClass":"removeClass"](u+"state-muted"),t=.34>t?"low":.67>t?"medium":"high",v.attr("data-volume",t)}).bind("emptied updateJMEState play playing waiting",function(t){var i;"emptied"==t.type||"updateJMEState"==t.type&&e.prop(this,"paused")?("emptied"==t.type&&(p=!f.prop("autoplay")),i="addClass"):("play"==t.type||"waiting"==t.type||"playing"==t.type)&&(i="removeClass"),i&&v[i](u+"state-initial")}),v.addClass(u+"userinactive").on({useractive:function(){v.addClass(u+"useractive").removeClass(u+"userinactive")},focusin:function(){clearTimeout(r),v.addClass(u+"focusenter")},focusout:function(){clearTimeout(r),r=setTimeout(function(){v.removeClass(u+"focusenter")},1)},"mouseenter focusin":function(){clearTimeout(s),v.addClass(u+"fover"),p&&f.prop("preload","auto"),p=!1},"mouseleave focusout":function(){clearTimeout(s),s=setTimeout(function(){v.removeClass(u+"fover")},1)}}).on("userinactive",{idletime:3500},function(){v.removeClass(u+"useractive").addClass(u+"userinactive")})),v.jmeFn("addControls",y),a&&(j.controlbar&&v.jmeProp("controlbar",!0),n&&f.bind("updateJMEState",n).triggerHandler("updateJMEState"))})},e.jme.defineProp("isPlaying",{get:function(t){return!e.prop(t,"ended")&&!e.prop(t,"paused")&&e.prop(t,"readyState")>1&&!e.data(t,"mediaerror")},readonly:!0}),e.jme.defineProp("player",{readonly:!0}),e.jme.defineProp("media",{readonly:!0}),e.jme.defineProp("srces",{get:function(t){var i=e.jme.data(t),n=i.media.prop("src"),a=[];return n?[{src:n}]:a=e.map(e("source",i.media).get(),function(t){var i={src:e.prop(t,"src")},n=e.attr(t,"media");return n&&(i.media=n),n=e.attr(t,"type"),n&&(i.type=n),i})},set:function(t,i){var n=e.jme.data(t),a=function(t,i){"string"==typeof i&&(i={src:i}),e(document.createElement("source")).attr(i).appendTo(n.media)};return n.media.removeAttr("src").find("source").remove(),e.isArray(i)?e.each(i,a):a(0,i),n.media.jmeFn("load"),"noDataSet"}}),e.jme.defineMethod("togglePlay",function(){e(this).jmeFn(i.isPlaying.get(this)?"pause":"play")}),e.jme.defineProp("controlbar",{set:function(t,i){i=!!i;var n,a=e.jme.data(t),r=e("div.jme-default-media-overlay, div.jme-default-control-bar",a.player),s=e.jme.plugins["media-controls"],o="";return i&&!r[0]?a._controlbar?a._controlbar.appendTo(a.player):(a.media.prop("controls",!1),e.each(s.pluginOrder,function(t,i){var n=e.jme.plugins[i];n&&n.structure?o+=n.structure.replace("{%class%}",u+i).replace("{%text%}",n.text||""):i&&(o+=i)}),a._controlbar=e(s.barStructure),r=a._controlbar.find("div.jme-cb-box").addClass(u+"media-controls"),n=a._controlbar.filter(".jme-default-media-overlay").addClass(u+"play-pause"),n=n.add(r),n=n.add(e(o).appendTo(r)),a._controlbar.appendTo(a.player),a.player.jmeFn("addControls",n)):i||r.detach(),r=null,n=null,i}}),e.jme.defineMethod("addControls",function(t){var i=e.jme.data(this)||{};if(i.media){var n=e.jme.data(i.player[0],"controlElements")||e([]);t=e(t),e.each(e.jme.plugins,function(n,a){t.filter("."+a.className).add(t.find("."+a.className)).each(function(){var t=e(this),n=e.jme.data(this);n.player=i.player,n.media=i.media,n.rendered||(n.rendered=!0,a.options&&e.each(a.options,function(e,t){e in n||(n[e]=t)}),a._create(t,i.media,i.player,n),t=null)})}),e.jme.data(i.player[0],"controlElements",n.add(t)),i.player.triggerHandler("controlsadded")}}),e.jme.defineMethod("updateControlbar",function(){var t=e("."+e.jme.classNS+"time-slider",this);if(t[0]&&"absolute"!==t.css("position")){var i=Math.floor(t.parent().width())-.2,n=0;t.hide().siblings().each(function(){this!==t[0]&&"absolute"!==e.css(this,"position")&&"none"!==e.css(this,"display")&&(n+=Math.ceil(e(this).outerWidth(!0))+.1)}).end().show(),t.width(Math.floor(i-n-Math.ceil(t.outerWidth(!0)-t.width())-.3))}}),e.jme.registerPlugin("media-controls",{pluginOrder:["play-pause",'<div class="media-bar">',"currenttime-display","time-slider","duration-display",'<div class="volume-controls">',"mute-unmute","volume-slider","</div>","fullscreen",'<div class="subtitle-controls">',"captions","</div>","</div>"],barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar" tabindex="-1"><div class="jme-cb-box"></div></div>',_create:function(t,i,n){var a,r=function(){clearTimeout(a),t.jmeFn("updateControlbar"),a=setTimeout(function(){t.jmeFn("updateControlbar")},9)};setTimeout(function(){i.bind("loadedmetadata volumechange play pause ended emptied",r),n.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",r),e(window).bind("resize emchange",r)},1),r()}}),function(){var t={add:function(t,i,n){var a,r,s=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),o=e(t),u=function(){s.idle||(s.idle=!0,s.trigger.userinactive&&o.trigger("userinactive"))},l=function(e){!e||"mousemove"===e.type&&e.pageX===a&&e.pageY===r||("mousemove"===e.type&&(a=e.pageX,r=e.pageY),s.idleTimer&&clearTimeout(s.idleTimer),s.idleTimer=setTimeout(u,s.idletime),s.idle&&(s.idle=!1,s.trigger.useractive&&o.trigger("useractive")))};s.idletime=(i||{}).idletime||s.idletime,i&&"idle"in i&&(s.idle=i.idle),s.trigger[n]=!0,s.bound||(o.bind("mouseleave.jmeuseractivity",u).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",l),s.bound=!0),s.idle||l({type:"initunidled"})},remove:function(t,i){var n=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});n.trigger[i]=!1,n.trigger.useractive||n.trigger.userinactive||(e(t).unbind(".jmeuseractivity"),n.bound=!1)}};e.each(["useractive","userinactive"],function(i,n){e.event.special[n]={setup:function(e){t.add(this,e,n)},teardown:function(){t.remove(this,n)}}})}()})(jQuery),function(e){function t(e,t){var i,n,a;return{get:function(){return a?void 0:e.apply(this,arguments)},set:function(){clearTimeout(i),clearTimeout(n);var e=this,r=arguments;a=!0,i=setTimeout(function(){t.apply(e,r),n=setTimeout(function(){a=!1},30)},0)}}}var i="pseudoClasses",n={play:1,playing:1},a={pause:1,ended:1},r=!(Modernizr.localstorage||Modernizr.boxSizing||Modernizr["display-table"]||Modernizr.video||e.support.getSetAttribute),s=function(){e.webshims.loader&&!s.rangeType&&(!e.webshims.modules["range-ui"]||e.fn.slider?(e.webshims.loader.loadList(["jquery-ui"]),e.webshims.modules["input-widgets"].src&&e.webshims.loader.loadList(["input-widgets"])):e.webshims.modules["range-ui"]&&(s.rangeType="rangeui",e.webshims.loader.loadList(["range-ui"]))),s.rangeType||(s.rangeType="jqueryui")},o=function(t){var i;s(),"jqueryui"==s.rangeType?(i=function(){e.fn._uiSlider||(e.mobile&&e.mobile.slider?e.widget("jme._uiSlider",e.ui.slider.prototype):e.fn._uiSlider=e.fn.slider),t()},e.webshims.ready("jquery-ui",function(){e.ui&&e.ui.slider?i():e.webshims.ready("input-widgets",i)})):e.webshims.ready("range-ui",t)},u='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',l='<div  class="{%class%}"></div>',d='<div class="{%class%}"></div>';e.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:u,text:"play / pause",_create:function(t,r){var s=e.jme.getButtonText(t,[this[i].play,this[i].pause]);r.bind("play playing ended pause updateJMEState",function(e){var t=e.type;t=n[t]?1:a[t]?0:r.jmeProp("isPlaying")?1:0,s(t)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){r.jmeFn("togglePlay"),e.stopPropagation()})}}),e.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:u,text:"mute / unmute",_create:function(t,n){var a=e.jme.getButtonText(t,[this[i].mute,this[i].unmute]);n.bind("volumechange updateJMEState",function(){a(n.prop("muted")?1:0)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){n.prop("muted",!n.prop("muted")),e.stopPropagation()})}}),e.jme.registerPlugin("volume-slider",{structure:d,_create:function(e,i){s();var n=function(){var n,a;"jqueryui"==s.rangeType?(a=t(function(){var t=i.prop("volume");void 0!==t&&e._uiSlider("value",t)},function(e){i.prop({muted:!1,volume:e})}),e.html('<div class="slider-rail"><a href="#" class="ui-slider-handle"></a></div>')._uiSlider({range:"min",max:1,step:.05,value:i.prop("volume"),slide:function(e,t){e.originalEvent&&a.set(t.value)}})):(a=t(function(){var e=i.prop("volume");void 0!==e&&n.value(e)},function(){i.prop({muted:!1,volume:n.options.value})}),n=e.rangeUI({min:0,max:1,step:"any",input:function(){a.set()}}).data("rangeUi")),i.bind("volumechange",a.get)};o(n)}}),e.jme.registerPlugin("time-slider",{structure:d,pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(n,a,u){s();var l=this,d=function(){var o,d,c,m,p,p=e.jme.classNS+"has-duration";e.jme.classNS+"no-duration";var f=a.prop("duration");"jqueryui"==s.rangeType?(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{n._uiSlider("value",e)}catch(t){}},function(e){try{a.prop("currentTime",e).triggerHandler("timechanged",[e])}catch(t){}}),d=function(){f=a.prop("duration"),f&&isFinite(f)&&!isNaN(f)?(n._uiSlider("option","disabled",!1)._uiSlider("option","max",f),u.removeClass(l[i].no)):(n._uiSlider("option","disabled",!0),n._uiSlider("value",0),u.addClass(l[i].no))},n._uiSlider({range:r?!1:"min",step:.1,value:a.prop("currentTime"),slide:function(e,t){e.originalEvent&&o.set(t.value)}}),a.bind({timeupdate:o.get,emptied:function(){d(),n._uiSlider("value",0)},durationchange:d})):(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{c.value(e)}catch(t){}},function(){try{a.prop("currentTime",c.options.value).triggerHandler("timechanged",[c.options.value])}catch(e){}}),d=function(){f=a.prop("duration"),p=f&&isFinite(f)&&!isNaN(f),p?(c.disabled(!1),c.max(f),u.removeClass(l[i].no)):(c.disabled(!0),c.max(0),u.addClass(l[i].no))},c=n.rangeUI({min:0,value:a.prop("currentTime")||0,step:"any",input:function(){o.set()},textValue:function(e){return a.jmeFn("formatTime",e)}}).data("rangeUi"),m=e('<span class="'+e.jme.classNS+'time-select" />').appendTo(n),n.on({mouseenter:function(t){if(p){var i=(n.offset()||{left:0}).left,r=n.innerWidth(),s=function(e){var t=100*((e-i)/r);m.html(a.jmeFn("formatTime",f*t/100)).css({left:t+"%"})};s(t.pageX),m.addClass(e.jme.classNS+"show-time-select"),n.off(".jmetimeselect").on("mousemove.jmetimeselect",function(e){s(e.pageX)})}},mouseleave:function(){m.removeClass(e.jme.classNS+"show-time-select"),n.off(".jmetimeselect")}}),a.bind({timeupdate:o.get,emptied:function(){d(),c.value(0),n._uiSlider("value",0)},durationchange:d})),u.jmeFn("addControls",e('<div class="'+e.jme.classNS+'buffer-progress" />').prependTo(n)),d()};o(d)}}),e.jme.defineMethod("concerningRange",function(t,i){var n=this,a={start:0,end:0};if(t||(t="buffered"),t=e.prop(n,t),null==i&&(i=e.prop(n,"currentTime")),!(t&&"length"in t))return a;for(var r=0,s=t.length;s>r&&(a.start=t.start(r),a.end=t.end(r),!(i>=a.start&&a.end>=i));r++);return a}),e.jme.defineProp("progress",{get:function(t){var i=e.jme.data(t);if(!i.media)return 0;var n=100*(i.media.jmeFn("concerningRange").end/i.media.prop("duration"));return n>99.4&&(n=100),n||0},readonly:!0}),e.jme.registerPlugin("buffer-progress",{_create:function(t,i,n,a){var r=e('<div class="'+e.jme.classNS+'buffer-progress-indicator" />').appendTo(t),s=function(){var e=i.jmeProp("progress");a.progress!==e&&(a.progress=e,r.css("width",e+"%"))};i.bind({progress:s,emptied:function(){r.css("width",0),a.progress=0},playing:s}),s()}});var c={hh:6e4,mm:60,ss:1,ms:.001},m=function(t,i){var n;i||(i=["mm","ss"]),null==t&&(n=e.jme.data(this),t=e.prop(n.media,"duration")),t||(t=0);for(var a,r=[],s=0,o=i.length;o>s;s++)"ms"==i[s]&&s==o-1?a=Math.round(t/c[i[s]]/10):(a=parseInt(t/c[i[s]],10),t%=c[i[s]]),10>a&&(a="0"+a),r.push(a);return r.join(":")};e.jme.defineMethod("formatTime",m),e.jme.defineProp("format",{set:function(t,i){e.isArray(i)||(i=i.split(":"));var n=e.jme.data(t);return n.format=i,e(t).triggerHandler("updatetimeformat"),n.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("duration-display",{structure:l,options:{format:"mm:ss"},_create:function(e,t,i,n){"string"==typeof n.format&&(n.format=n.format.split(":"));var a=function(){e.html(m(t.prop("duration"),n.format))};t.bind("durationchange emptied",a),e.bind("updatetimeformat",a).jmeProp("format",n.format)}}),e.jme.defineProp("countdown",{set:function(t,i){var n=e.jme.data(t);return n.countdown=!!i,e(t).triggerHandler("updatetimeformat"),n.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("currenttime-display",{structure:l,options:{format:"mm:ss",countdown:!1},_create:function(e,t,i,n){"string"==typeof n.format&&(n.format=n.format.split(":"));var a=function(){var i=t.prop("currentTime");n.countdown&&(i=(t.prop("duration")||0)-i,.7>i&&(i=0)),e.html(m(i,n.format))};t.bind("timeupdate emptied durationchange",a),e.bind("updatetimeformat",a).jmeProp("format",n.format)}}),e.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(t,i){var n=function(){var n=i.prop("poster");n?t.html('<span></span><img src="'+n+'" class="'+e.jme.classNS+'poster-image" />'):t.empty()};i.bind("emptied",n),n()}})}(jQuery),function(e){var t;e.jme.startJME=function(){if(!t){var i;(i=e.webshims.modules)&&i["range-ui"]&&setTimeout(function(){e.fn.slider||e.webshims.loader.loadList(["range-ui"])},9),e(function(){e.jme.createSelectors(),e.jme.initJME(document,e([]))}),e.webshims.ready("mediaelement",function(){e.webshims.addReady(function(t,i){t!==document&&e.jme.initJME(t,i)})}),t=!0}}}(jQuery);