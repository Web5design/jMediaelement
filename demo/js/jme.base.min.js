(function(e){window.webshims||(e.webshims=e.webshims||{ready:function(e,t){t()},addReady:function(t){e(function(){t(document,e([]))})}},window.webshims=e.webshims);var t=e.webshims;window.Modernizr&&"opacity"in Modernizr||e("html").addClass("opacity"in document.documentElement.style?"opacity":"no-opacity");var n={},a={},i=!1;e(window).on("load",function(){i=!0;var t,n=function(){i=!0};e(window).on("scroll",function(){i=!1,clearTimeout(t),t=setTimeout(n,999)})}),e.jme={version:"2.0.9",classNS:"",options:{},plugins:{},data:function(t,n,a){var i=e(t).data(o+"jme")||e.data(t,o+"jme",{});return void 0===a?n?i[n]:i:(i[n]=a,void 0)},registerPlugin:function(e,t){this.plugins[e]=t,t.nodeName||(t.nodeName=""),t.className||(t.className=e)},defineMethod:function(e,t){a[e]=t},defineProp:function(t,a){a||(a={}),a.set||(a.set=a.readonly?function(){throw t+" is readonly"}:e.noop),a.get||(a.get=function(n){return e.jme.data(n,t)}),n[t]=a},prop:function(t,a,i){if(!n[a])return e.prop(t,a,i);if(void 0===i)return n[a].get(t);var r=n[a].set(t,i);void 0===r&&(r=i),"noDataSet"!=r&&e.jme.data(t,a,r)},setText:function(t,n){var a=t;t&&n&&(a={},a[t]=n),e.each(a,function(t,n){e.jme.plugins[t]&&(e.jme.plugins[t].text=n)})}},e.fn.jmeProp=function(t,n){return e.access(this,e.jme.prop,t,n,arguments.length>1)},e.fn.jmeFn=function(t){var n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){return n=(a[t]||e.prop(this,t)).apply(this,i),void 0!==n?!1:void 0}),void 0!==n?n:this};var r,s=[],o="";e.jme.createSelectors=function(){r||(o=e.jme.classNS,r="div."+o+"mediaplayer",e.each(e.jme.plugins,function(t,n){n.className=o+n.className,n.selector=n.nodeName+"."+n.className,s.push(n.selector),o&&n.pseudoClasses&&e.each(n.pseudoClasses,function(e,t){n.pseudoClasses[e]=o+t})}),s=s.join(","))},e.jme.initJME=function(t,n){e("video, audio",t).add(n.filter("video, audio")).filter("[data-muted]").each(function(){e.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var t=e(this).data("volume");1>=t&&t>=0&&e.prop(this,"volume",t)}),e(r,t).add(n.filter(r)).jmePlayer()};var l={emptied:1,pause:1};e.jme.getDOMList=function(t){var n=[];return t||(t=[]),"string"==typeof t&&(t=t.split(" ")),e.each(t,function(e,t){t&&(t=document.getElementById(t),t&&n.push(t))}),n},t.ready("dom-support",function(){t.defineNodeNamesProperty&&!e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var t=[],n=this.id;return n&&(t=e('label[for="'+n+'"]')),t[0]||(t=e(this).closest("label",this.form)),t.get()},writeable:!1}})}),e.jme.getButtonText=function(t,n){var a=e("span.jme-text, +label span.jme-text",t),i=t.prop("labels");i=i&&i[0]?e(i).eq(0):!1,a[0]||(a=i||t);var r,s,o,l,u=a.text().split("/"),d=t.prop("title").split("/"),c=function(d){l!==d&&(l=d,s&&a.text(u[d||0]),o&&(t.prop("title",u[d||0]),i&&i.prop("title",u[d||0])),n&&t.removeClass(n[d?0:1]).addClass(n[d]),r&&(t.prop("checked",!!d),(t.data("checkboxradio")||{refresh:e.noop}).refresh()))};return 2==u.length&&(u[0]=u[0].trim(),u[1]=u[1].trim(),s=!0),2==d.length&&(d[0]=d[0].trim(),d[1]=d[1].trim(),o=!0),t.is('[type="checkbox"], [type="radio"]')?(t.prop("checked",function(){return this.defaultChecked}),r=!0):t.is("a")&&t.bind("click",function(e){e.preventDefault()}),c},e.fn.jmePlayer=function(t){var n=["idle","playing","ended","waiting","mediaerror"].map(function(e){return o+"state-"+e}).join(" ");return this.each(function(){t&&e.jme.data(this,e.extend(!0,{},t));var a,r,u,d,c,m,p,f,h=e("audio, video",this).filter(":first"),v=e(this),g=e(s,v),y=e.jme.getDOMList(e.jme.data(this,"controls")),j=g.add(e(y)),b=e.jme.data(this),w=e.jme.data(h[0]);v.addClass(h.prop("nodeName").toLowerCase()+"player"),w.player=v,w.media=h,b.media||(r=!0,f=!h.prop("autoplay"),m=function(){h.unbind("canplay",c),clearTimeout(p)},c=function(){var t=e.prop(this,"paused")?"idle":"playing";v.removeClass(n).addClass(o+"state-"+t)},a=function(t){var a,i,r=t.type;m(),"ended"==r||e.prop(this,"ended")?r="ended":"waiting"==r?e.prop(this,"readyState")>2?r="":(p=setTimeout(function(){h.prop("readyState")>2&&c()},9),h.bind("canPlay",c)):l[r]?r="idle":(a=e.prop(this,"readyState"),i=e.prop(this,"paused"),r=!i&&3>a?"waiting":!i&&a>2?"playing":"idle"),r&&v.removeClass(n).addClass(o+"state-"+r)},b.media=h,b.player=v,h.bind("ended",function(){m(),h.jmeFn("pause"),h.prop("autoplay")||h.prop("loop")||h.hasClass("no-reload")||h.jmeFn("load")}).bind("emptied waiting canplay canplaythrough playing ended pause mediaerror",a).bind("volumechange updateJMEState",function(){var t=e.prop(this,"volume");v[!t||e.prop(this,"muted")?"addClass":"removeClass"](o+"state-muted"),t=.34>t?"low":.67>t?"medium":"high",v.attr("data-volume",t)}).bind("emptied updateJMEState play playing waiting",function(t){var n;"emptied"==t.type||"updateJMEState"==t.type&&e.prop(this,"paused")?("emptied"==t.type&&(f=!h.prop("autoplay")),n="addClass"):("play"==t.type||"waiting"==t.type||"playing"==t.type)&&(n="removeClass"),n&&v[n](o+"state-initial")}),v.addClass(o+"userinactive").on({useractive:function(){v.addClass(o+"useractive").removeClass(o+"userinactive")},focusin:function(){clearTimeout(u),v.addClass(o+"focusenter")},focusout:function(){clearTimeout(u),u=setTimeout(function(){v.removeClass(o+"focusenter")},1)},"mouseenter focusin":function(){clearTimeout(d),v.addClass(o+"fover"),f&&i&&(h.prop("preload","auto"),f=!1)},"mouseleave focusout":function(){clearTimeout(d),d=setTimeout(function(){v.removeClass(o+"fover")},1)}}).on("userinactive",{idletime:3500},function(){v.removeClass(o+"useractive").addClass(o+"userinactive")})),v.jmeFn("addControls",j),r&&(b.controlbar&&v.jmeProp("controlbar",!0),a&&h.bind("updateJMEState",a).triggerHandler("updateJMEState"))})},e.jme.defineProp("isPlaying",{get:function(t){return!e.prop(t,"ended")&&!e.prop(t,"paused")&&e.prop(t,"readyState")>1&&!e.data(t,"mediaerror")},readonly:!0}),e.jme.defineProp("player",{readonly:!0}),e.jme.defineProp("media",{readonly:!0}),e.jme.defineProp("srces",{get:function(t){var n=e.jme.data(t),a=n.media.prop("src"),i=[];return a?[{src:a}]:i=e.map(e("source",n.media).get(),function(t){var n={src:e.prop(t,"src")},a=e.attr(t,"media");return a&&(n.media=a),a=e.attr(t,"type"),a&&(n.type=a),n})},set:function(t,n){var a=e.jme.data(t),i=function(t,n){"string"==typeof n&&(n={src:n}),e(document.createElement("source")).attr(n).appendTo(a.media)};return a.media.removeAttr("src").find("source").remove(),e.isArray(n)?e.each(n,i):i(0,n),a.media.jmeFn("load"),"noDataSet"}}),e.jme.defineMethod("togglePlay",function(){e(this).jmeFn(n.isPlaying.get(this)?"pause":"play")}),e.jme.defineProp("controlbar",{set:function(t,n){n=!!n;var a,i=e.jme.data(t),r=e("div.jme-default-media-overlay, div.jme-default-control-bar",i.player),s=e.jme.plugins["media-controls"],l="";return n&&!r[0]?i._controlbar?i._controlbar.appendTo(i.player):(i.media.prop("controls",!1),e.each(s.pluginOrder,function(t,n){var a=e.jme.plugins[n];a&&a.structure?l+=a.structure.replace("{%class%}",o+n).replace("{%text%}",a.text||""):n&&(l+=n)}),i._controlbar=e(s.barStructure),r=i._controlbar.find("div.jme-cb-box").addClass(o+"media-controls"),a=i._controlbar.filter(".jme-default-media-overlay").addClass(o+"play-pause"),a=a.add(r),a=a.add(e(l).appendTo(r)),i._controlbar.appendTo(i.player),i.player.jmeFn("addControls",a)):n||r.detach(),r=null,a=null,n}}),e.jme.defineMethod("addControls",function(t){var n=e.jme.data(this)||{};if(n.media){var a=e.jme.data(n.player[0],"controlElements")||e([]);t=e(t),e.each(e.jme.plugins,function(a,i){t.filter("."+i.className).add(t.find("."+i.className)).each(function(){var t=e(this),a=e.jme.data(this);a.player=n.player,a.media=n.media,a.rendered||(a.rendered=!0,i.options&&e.each(i.options,function(e,t){e in a||(a[e]=t)}),i._create(t,n.media,n.player,a),t=null)})}),e.jme.data(n.player[0],"controlElements",a.add(t)),n.player.triggerHandler("controlsadded")}}),e.jme.defineMethod("updateControlbar",function(){var t=e("."+e.jme.classNS+"time-slider",this);if(t[0]&&"absolute"!==t.css("position")){var n,a=0,i={position:t[0].style.position,display:t[0].style.display};t.css({display:"none",position:"absolute"}),n=Math.floor(t.parent().width())-.2,t.siblings().each(function(){this!==t[0]&&"absolute"!==e.css(this,"position")&&"none"!==e.css(this,"display")&&(a+=Math.ceil(e(this).outerWidth(!0))+.1)}).end().css(i),t.width(Math.floor(n-a-Math.ceil(t.outerWidth(!0)-t.width())-.3))}}),e.jme.registerPlugin("media-controls",{pluginOrder:["play-pause",'<div class="media-bar">',"currenttime-display","time-slider","duration-display",'<div class="volume-controls">',"mute-unmute","volume-slider","</div>","fullscreen",'<div class="subtitle-controls">',"captions","</div>","</div>"],barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar" tabindex="-1"><div class="jme-cb-box"></div></div>',_create:function(t,n,a){var i,r=function(){clearTimeout(i),t.jmeFn("updateControlbar"),i=setTimeout(function(){t.jmeFn("updateControlbar")},9)};setTimeout(function(){n.bind("loadedmetadata volumechange play pause ended emptied",r),a.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",r),e(window).bind("resize emchange",r)},1),r()}}),function(){var t={add:function(t,n,a){var i,r,s=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),o=e(t),l=function(){s.idle||(s.idle=!0,s.trigger.userinactive&&o.trigger("userinactive"))},u=function(e){!e||"mousemove"===e.type&&e.pageX===i&&e.pageY===r||("mousemove"===e.type&&(i=e.pageX,r=e.pageY),s.idleTimer&&clearTimeout(s.idleTimer),s.idleTimer=setTimeout(l,s.idletime),s.idle&&(s.idle=!1,s.trigger.useractive&&o.trigger("useractive")))};s.idletime=(n||{}).idletime||s.idletime,n&&"idle"in n&&(s.idle=n.idle),s.trigger[a]=!0,s.bound||(o.bind("mouseleave.jmeuseractivity",l).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",u),s.bound=!0),s.idle||u({type:"initunidled"})},remove:function(t,n){var a=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});a.trigger[n]=!1,a.trigger.useractive||a.trigger.userinactive||(e(t).unbind(".jmeuseractivity"),a.bound=!1)}};e.each(["useractive","userinactive"],function(n,a){e.event.special[a]={setup:function(e){t.add(this,e,a)},teardown:function(){t.remove(this,a)}}})}()})(jQuery),function(e){function t(e,t){var n,a,i;return{get:function(){return i?void 0:e.apply(this,arguments)},set:function(){clearTimeout(n),clearTimeout(a);var e=this,r=arguments;i=!0,n=setTimeout(function(){t.apply(e,r),a=setTimeout(function(){i=!1},30)},0)}}}var n="pseudoClasses",a={play:1,playing:1},i={pause:1,ended:1};!(Modernizr.boxSizing||Modernizr["display-table"]||Modernizr.video||e.support.getSetAttribute);var r=function(){e.webshims.loader&&e.webshims.loader.loadList(["range-ui"])},s=function(t){r(),e.webshims.ready("range-ui",t)},o='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',l='<div  class="{%class%}"></div>',u='<div class="{%class%}"></div>';e.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:o,text:"play / pause",_create:function(t,r){var s=e.jme.getButtonText(t,[this[n].play,this[n].pause]);r.bind("play playing ended pause updateJMEState",function(e){var t=e.type;t=a[t]?1:i[t]?0:r.jmeProp("isPlaying")?1:0,s(t)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){r.jmeFn("togglePlay"),e.stopPropagation()})}}),e.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:o,text:"mute / unmute",_create:function(t,a){var i=e.jme.getButtonText(t,[this[n].mute,this[n].unmute]);a.bind("volumechange updateJMEState",function(){i(a.prop("muted")?1:0)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){a.prop("muted",!a.prop("muted")),e.stopPropagation()})}}),e.jme.registerPlugin("volume-slider",{structure:u,_create:function(e,n){r();var a=function(){var a,i;i=t(function(){var e=n.prop("volume");void 0!==e&&a.value(e)},function(){n.prop({muted:!1,volume:a.options.value})}),a=e.rangeUI({min:0,max:1,step:"any",input:function(){i.set()}}).data("rangeUi"),n.bind("volumechange",i.get)};s(a)}}),e.jme.registerPlugin("time-slider",{structure:u,pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(a,i,o){r();var l=this,u=function(){var r,s,u,d,c=e.jme.classNS+"has-duration";e.jme.classNS+"no-duration";var m=i.prop("duration");r=t(function(){var e=i.prop("currentTime");if(!isNaN(e))try{u.value(e)}catch(t){}},function(){try{i.prop("currentTime",u.options.value).triggerHandler("timechanged",[u.options.value])}catch(e){}}),s=function(){m=i.prop("duration"),c=m&&isFinite(m)&&!isNaN(m),c?(u.disabled(!1),u.max(m),o.removeClass(l[n].no)):(u.disabled(!0),u.max(Number.MAX_VALUE),o.addClass(l[n].no))},u=a.rangeUI({min:0,value:i.prop("currentTime")||0,step:"any",input:function(){r.set()},textValue:function(e){return i.jmeFn("formatTime",e)}}).data("rangeUi"),d=e('<span class="'+e.jme.classNS+'time-select" />').appendTo(a),a.on({mouseenter:function(t){if(c){var n=(a.offset()||{left:0}).left,r=a.innerWidth(),s=function(e){var t=100*((e-n)/r);d.html(i.jmeFn("formatTime",m*t/100)).css({left:t+"%"})};s(t.pageX),d.addClass(e.jme.classNS+"show-time-select"),a.off(".jmetimeselect").on("mousemove.jmetimeselect",function(e){s(e.pageX)})}},mouseleave:function(){d.removeClass(e.jme.classNS+"show-time-select"),a.off(".jmetimeselect")}}),i.bind({timeupdate:r.get,emptied:function(){s(),u.value(0)},durationchange:s}),o.jmeFn("addControls",e('<div class="'+e.jme.classNS+'buffer-progress" />').prependTo(a)),s()};s(u)}}),e.jme.defineMethod("concerningRange",function(t,n){var a=this,i={start:0,end:0};if(t||(t="buffered"),t=e.prop(a,t),null==n&&(n=e.prop(a,"currentTime")),!(t&&"length"in t))return i;for(var r=0,s=t.length;s>r&&(i.start=t.start(r),i.end=t.end(r),!(n>=i.start&&i.end>=n));r++);return i}),e.jme.defineProp("progress",{get:function(t){var n=e.jme.data(t);if(!n.media)return 0;var a=100*(n.media.jmeFn("concerningRange").end/n.media.prop("duration"));return a>99.4&&(a=100),a||0},readonly:!0}),e.jme.registerPlugin("buffer-progress",{_create:function(t,n,a,i){var r=e('<div class="'+e.jme.classNS+'buffer-progress-indicator" />').appendTo(t),s=function(){var e=n.jmeProp("progress");i.progress!==e&&(i.progress=e,r.css("width",e+"%"))};n.bind({progress:s,emptied:function(){r.css("width",0),i.progress=0},playing:s}),s()}});var d={hh:6e4,mm:60,ss:1,ms:.001},c=function(t,n){var a;n||(n=["mm","ss"]),null==t&&(a=e.jme.data(this),t=e.prop(a.media,"duration")),t||(t=0);for(var i,r=[],s=0,o=n.length;o>s;s++)"ms"==n[s]&&s==o-1?i=Math.round(t/d[n[s]]/10):(i=parseInt(t/d[n[s]],10),t%=d[n[s]]),10>i&&(i="0"+i),r.push(i);return r.join(":")};e.jme.defineMethod("formatTime",c),e.jme.defineProp("format",{set:function(t,n){e.isArray(n)||(n=n.split(":"));var a=e.jme.data(t);return a.format=n,e(t).triggerHandler("updatetimeformat"),a.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("duration-display",{structure:l,options:{format:"mm:ss"},_create:function(e,t,n,a){"string"==typeof a.format&&(a.format=a.format.split(":"));var i=function(){e.html(c(t.prop("duration"),a.format))};t.bind("durationchange emptied",i),e.bind("updatetimeformat",i).jmeProp("format",a.format)}}),e.jme.defineProp("countdown",{set:function(t,n){var a=e.jme.data(t);return a.countdown=!!n,e(t).triggerHandler("updatetimeformat"),a.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("currenttime-display",{structure:l,options:{format:"mm:ss",countdown:!1},_create:function(e,t,n,a){"string"==typeof a.format&&(a.format=a.format.split(":"));var i=function(){var n=t.prop("currentTime");a.countdown&&(n=(t.prop("duration")||0)-n,.7>n&&(n=0)),e.html(c(n,a.format))};t.bind("timeupdate emptied durationchange",i),e.bind("updatetimeformat",i).jmeProp("format",a.format)}}),e.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(t,n){var a=function(){var a=n.prop("poster");a?t.html('<span></span><img src="'+a+'" class="'+e.jme.classNS+'poster-image" />'):t.empty()};n.bind("emptied",a),a()}})}(jQuery),function(e){var t;e.jme.startJME=function(){t||(e.webshims.loader&&setTimeout(function(){e.webshims.loader.loadList(["range-ui"])},0),e(function(){e.jme.createSelectors(),e.jme.initJME(document,e([]))}),e.webshims.ready("mediaelement",function(){e.webshims.addReady(function(t,n){t!==document&&e.jme.initJME(t,n)})}),t=!0)},e(window).trigger("jmepluginready")}(window.webshims&&webshims.$||jQuery);