(function(e){e.webshims=e.webshims||{ready:function(e,t){t()},addReady:function(t){e(function(){t(document,e([]))})}};var t=e.webshims;window.Modernizr&&"opacity"in Modernizr||e("html").addClass(e.support.opacity?"opacity":"no-opacity");var n={},i={},a=!1;e(window).on("load",function(){a=!0;var t,n=function(){a=!0};e(window).on("scroll",function(){a=!1,clearTimeout(t),t=setTimeout(n,999)})}),e.jme={version:"2.0.5",classNS:"",options:{},plugins:{},data:function(t,n,i){var a=e(t).data(l+"jme")||e.data(t,l+"jme",{});return void 0===i?n?a[n]:a:(a[n]=i,void 0)},registerPlugin:function(e,t){this.plugins[e]=t,t.nodeName||(t.nodeName=""),t.className||(t.className=e)},defineMethod:function(e,t){i[e]=t},defineProp:function(t,i){i||(i={}),i.set||(i.set=i.readonly?function(){throw t+" is readonly"}:e.noop),i.get||(i.get=function(n){return e.jme.data(n,t)}),n[t]=i},prop:function(t,i,a){if(!n[i])return e.prop(t,i,a);if(void 0===a)return n[i].get(t);var r=n[i].set(t,a);void 0===r&&(r=a),"noDataSet"!=r&&e.jme.data(t,i,r)},setText:function(t,n){var i=t;t&&n&&(i={},i[t]=n),e.each(i,function(t,n){e.jme.plugins[t]&&(e.jme.plugins[t].text=n)})}};var r=!0;try{e.access(e(document.documentElement),"t",void 0,!0,e.noop)}catch(s){r=!1}e.fn.jmeProp=r?function(t,n){return e.access(this,t,n,!0,e.jme.prop)}:function(t,n){return e.access(this,e.jme.prop,t,n,arguments.length>1)},e.fn.jmeFn=function(t){var n,a=Array.prototype.slice.call(arguments,1);return this.each(function(){return n=(i[t]||e.prop(this,t)).apply(this,a),void 0!==n?!1:void 0}),void 0!==n?n:this};var o,u=[],l="";e.jme.createSelectors=function(){o||(l=e.jme.classNS,o="div."+l+"mediaplayer",e.each(e.jme.plugins,function(t,n){n.className=l+n.className,n.selector=n.nodeName+"."+n.className,u.push(n.selector),l&&n.pseudoClasses&&e.each(n.pseudoClasses,function(e,t){n.pseudoClasses[e]=l+t})}),u=u.join(","))},e.jme.initJME=function(t,n){e("video, audio",t).add(n.filter("video, audio")).filter("[data-muted]").each(function(){e.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var t=e(this).data("volume");1>=t&&t>=0&&e.prop(this,"volume",t)}),e(o,t).add(n.filter(o)).jmePlayer()};var d={emptied:1,pause:1};e.jme.getDOMList=function(t){var n=[];return t||(t=[]),"string"==typeof t&&(t=t.split(" ")),e.each(t,function(e,t){t&&(t=document.getElementById(t),t&&n.push(t))}),n},t.ready("dom-support",function(){t.defineNodeNamesProperty&&!e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var t=[],n=this.id;return n&&(t=e('label[for="'+n+'"]')),t[0]||(t=e(this).closest("label",this.form)),t.get()},writeable:!1}})}),e.jme.getButtonText=function(t,n){var i=e("span.jme-text, +label span.jme-text",t),a=t.prop("labels");a=a&&a[0]?e(a).eq(0):!1,i[0]||(i=a||t);var r,s,o,u,l=i.text().split("/"),d=t.prop("title").split("/"),c=function(d){u!==d&&(u=d,s&&i.text(l[d||0]),o&&(t.prop("title",l[d||0]),a&&a.prop("title",l[d||0])),n&&t.removeClass(n[d?0:1]).addClass(n[d]),r&&(t.prop("checked",!!d),(t.data("checkboxradio")||{refresh:e.noop}).refresh()))};return 2==l.length&&(l[0]=l[0].trim(),l[1]=l[1].trim(),s=!0),2==d.length&&(d[0]=d[0].trim(),d[1]=d[1].trim(),o=!0),t.is('[type="checkbox"], [type="radio"]')?(t.prop("checked",function(){return this.defaultChecked}),r=!0):t.is("a")&&t.bind("click",function(e){e.preventDefault()}),c},e.fn.jmePlayer=function(t){var n=["idle","playing","ended","waiting","mediaerror"].map(function(e){return l+"state-"+e}).join(" ");return this.each(function(){t&&e.jme.data(this,e.extend(!0,{},t));var i,r,s,o,c,m,p,f,v=e("audio, video",this).filter(":first"),g=e(this),h=e(u,g),y=e.jme.getDOMList(e.jme.data(this,"controls")),j=h.add(e(y)),b=e.jme.data(this),w=e.jme.data(v[0]);w.player=g,w.media=v,b.media||(r=!0,f=!v.prop("autoplay"),m=function(){v.unbind("canplay",c),clearTimeout(p)},c=function(){var t=e.prop(this,"paused")?"idle":"playing";g.removeClass(n).addClass(l+"state-"+t)},i=function(t){var i,a,r=t.type;m(),"ended"==r||e.prop(this,"ended")?r="ended":"waiting"==r?e.prop(this,"readyState")>2?r="":(p=setTimeout(function(){v.prop("readyState")>2&&c()},9),v.bind("canPlay",c)):d[r]?r="idle":(i=e.prop(this,"readyState"),a=e.prop(this,"paused"),r=!a&&3>i?"waiting":!a&&i>2?"playing":"idle"),r&&g.removeClass(n).addClass(l+"state-"+r)},b.media=v,b.player=g,v.bind("ended",function(){m(),v.jmeFn("pause"),v.prop("autoplay")||v.prop("loop")||v.hasClass("no-reload")||v.jmeFn("load")}).bind("emptied waiting canplay canplaythrough playing ended pause mediaerror",i).bind("volumechange updateJMEState",function(){var t=e.prop(this,"volume");g[!t||e.prop(this,"muted")?"addClass":"removeClass"](l+"state-muted"),t=.34>t?"low":.67>t?"medium":"high",g.attr("data-volume",t)}).bind("emptied updateJMEState play playing waiting",function(t){var n;"emptied"==t.type||"updateJMEState"==t.type&&e.prop(this,"paused")?("emptied"==t.type&&(f=!v.prop("autoplay")),n="addClass"):("play"==t.type||"waiting"==t.type||"playing"==t.type)&&(n="removeClass"),n&&g[n](l+"state-initial")}),g.addClass(l+"userinactive").on({useractive:function(){g.addClass(l+"useractive").removeClass(l+"userinactive")},focusin:function(){clearTimeout(s),g.addClass(l+"focusenter")},focusout:function(){clearTimeout(s),s=setTimeout(function(){g.removeClass(l+"focusenter")},1)},"mouseenter focusin":function(){clearTimeout(o),g.addClass(l+"fover"),f&&a&&(v.prop("preload","auto"),f=!1)},"mouseleave focusout":function(){clearTimeout(o),o=setTimeout(function(){g.removeClass(l+"fover")},1)}}).on("userinactive",{idletime:3500},function(){g.removeClass(l+"useractive").addClass(l+"userinactive")})),g.jmeFn("addControls",j),r&&(b.controlbar&&g.jmeProp("controlbar",!0),i&&v.bind("updateJMEState",i).triggerHandler("updateJMEState"))})},e.jme.defineProp("isPlaying",{get:function(t){return!e.prop(t,"ended")&&!e.prop(t,"paused")&&e.prop(t,"readyState")>1&&!e.data(t,"mediaerror")},readonly:!0}),e.jme.defineProp("player",{readonly:!0}),e.jme.defineProp("media",{readonly:!0}),e.jme.defineProp("srces",{get:function(t){var n=e.jme.data(t),i=n.media.prop("src"),a=[];return i?[{src:i}]:a=e.map(e("source",n.media).get(),function(t){var n={src:e.prop(t,"src")},i=e.attr(t,"media");return i&&(n.media=i),i=e.attr(t,"type"),i&&(n.type=i),n})},set:function(t,n){var i=e.jme.data(t),a=function(t,n){"string"==typeof n&&(n={src:n}),e(document.createElement("source")).attr(n).appendTo(i.media)};return i.media.removeAttr("src").find("source").remove(),e.isArray(n)?e.each(n,a):a(0,n),i.media.jmeFn("load"),"noDataSet"}}),e.jme.defineMethod("togglePlay",function(){e(this).jmeFn(n.isPlaying.get(this)?"pause":"play")}),e.jme.defineProp("controlbar",{set:function(t,n){n=!!n;var i,a=e.jme.data(t),r=e("div.jme-default-media-overlay, div.jme-default-control-bar",a.player),s=e.jme.plugins["media-controls"],o="";return n&&!r[0]?a._controlbar?a._controlbar.appendTo(a.player):(a.media.prop("controls",!1),e.each(s.pluginOrder,function(t,n){var i=e.jme.plugins[n];i&&i.structure?o+=i.structure.replace("{%class%}",l+n).replace("{%text%}",i.text||""):n&&(o+=n)}),a._controlbar=e(s.barStructure),r=a._controlbar.find("div.jme-cb-box").addClass(l+"media-controls"),i=a._controlbar.filter(".jme-default-media-overlay").addClass(l+"play-pause"),i=i.add(r),i=i.add(e(o).appendTo(r)),a._controlbar.appendTo(a.player),a.player.jmeFn("addControls",i)):n||r.detach(),r=null,i=null,n}}),e.jme.defineMethod("addControls",function(t){var n=e.jme.data(this)||{};if(n.media){var i=e.jme.data(n.player[0],"controlElements")||e([]);t=e(t),e.each(e.jme.plugins,function(i,a){t.filter("."+a.className).add(t.find("."+a.className)).each(function(){var t=e(this),i=e.jme.data(this);i.player=n.player,i.media=n.media,i.rendered||(i.rendered=!0,a.options&&e.each(a.options,function(e,t){e in i||(i[e]=t)}),a._create(t,n.media,n.player,i),t=null)})}),e.jme.data(n.player[0],"controlElements",i.add(t)),n.player.triggerHandler("controlsadded")}}),e.jme.defineMethod("updateControlbar",function(){var t=e("."+e.jme.classNS+"time-slider",this);if(t[0]&&"absolute"!==t.css("position")){var n=Math.floor(t.parent().width())-.2,i=0;t.hide().siblings().each(function(){this!==t[0]&&"absolute"!==e.css(this,"position")&&"none"!==e.css(this,"display")&&(i+=Math.ceil(e(this).outerWidth(!0))+.1)}).end().show(),t.width(Math.floor(n-i-Math.ceil(t.outerWidth(!0)-t.width())-.3))}}),e.jme.registerPlugin("media-controls",{pluginOrder:["play-pause",'<div class="media-bar">',"currenttime-display","time-slider","duration-display",'<div class="volume-controls">',"mute-unmute","volume-slider","</div>","fullscreen",'<div class="subtitle-controls">',"captions","</div>","</div>"],barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar" tabindex="-1"><div class="jme-cb-box"></div></div>',_create:function(t,n,i){var a,r=function(){clearTimeout(a),t.jmeFn("updateControlbar"),a=setTimeout(function(){t.jmeFn("updateControlbar")},9)};setTimeout(function(){n.bind("loadedmetadata volumechange play pause ended emptied",r),i.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",r),e(window).bind("resize emchange",r)},1),r()}}),function(){var t={add:function(t,n,i){var a,r,s=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),o=e(t),u=function(){s.idle||(s.idle=!0,s.trigger.userinactive&&o.trigger("userinactive"))},l=function(e){!e||"mousemove"===e.type&&e.pageX===a&&e.pageY===r||("mousemove"===e.type&&(a=e.pageX,r=e.pageY),s.idleTimer&&clearTimeout(s.idleTimer),s.idleTimer=setTimeout(u,s.idletime),s.idle&&(s.idle=!1,s.trigger.useractive&&o.trigger("useractive")))};s.idletime=(n||{}).idletime||s.idletime,n&&"idle"in n&&(s.idle=n.idle),s.trigger[i]=!0,s.bound||(o.bind("mouseleave.jmeuseractivity",u).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",l),s.bound=!0),s.idle||l({type:"initunidled"})},remove:function(t,n){var i=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});i.trigger[n]=!1,i.trigger.useractive||i.trigger.userinactive||(e(t).unbind(".jmeuseractivity"),i.bound=!1)}};e.each(["useractive","userinactive"],function(n,i){e.event.special[i]={setup:function(e){t.add(this,e,i)},teardown:function(){t.remove(this,i)}}})}()})(jQuery),function(e){function t(e,t){var n,i,a;return{get:function(){return a?void 0:e.apply(this,arguments)},set:function(){clearTimeout(n),clearTimeout(i);var e=this,r=arguments;a=!0,n=setTimeout(function(){t.apply(e,r),i=setTimeout(function(){a=!1},30)},0)}}}var n="pseudoClasses",i={play:1,playing:1},a={pause:1,ended:1},r=!(Modernizr.boxSizing||Modernizr["display-table"]||Modernizr.video||e.support.getSetAttribute),s=function(){e.webshims.loader&&!s.rangeType&&(!e.webshims.modules["range-ui"]||e.fn.slider?(e.webshims.loader.loadList(["jquery-ui"]),e.webshims.modules["input-widgets"].src&&e.webshims.loader.loadList(["input-widgets"])):e.webshims.modules["range-ui"]&&(s.rangeType="rangeui",e.webshims.loader.loadList(["range-ui"]))),s.rangeType||(s.rangeType="jqueryui")},o=function(t){var n;s(),"jqueryui"==s.rangeType?(n=function(){e.fn._uiSlider||(e.mobile&&e.mobile.slider?e.widget("jme._uiSlider",e.ui.slider.prototype):e.fn._uiSlider=e.fn.slider),t()},e.webshims.ready("jquery-ui",function(){e.ui&&e.ui.slider?n():e.webshims.ready("input-widgets",n)})):e.webshims.ready("range-ui",t)},u='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',l='<div  class="{%class%}"></div>',d='<div class="{%class%}"></div>';e.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:u,text:"play / pause",_create:function(t,r){var s=e.jme.getButtonText(t,[this[n].play,this[n].pause]);r.bind("play playing ended pause updateJMEState",function(e){var t=e.type;t=i[t]?1:a[t]?0:r.jmeProp("isPlaying")?1:0,s(t)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){r.jmeFn("togglePlay"),e.stopPropagation()})}}),e.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:u,text:"mute / unmute",_create:function(t,i){var a=e.jme.getButtonText(t,[this[n].mute,this[n].unmute]);i.bind("volumechange updateJMEState",function(){a(i.prop("muted")?1:0)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){i.prop("muted",!i.prop("muted")),e.stopPropagation()})}}),e.jme.registerPlugin("volume-slider",{structure:d,_create:function(e,n){s();var i=function(){var i,a;"jqueryui"==s.rangeType?(a=t(function(){var t=n.prop("volume");void 0!==t&&e._uiSlider("value",t)},function(e){n.prop({muted:!1,volume:e})}),e.html('<div class="slider-rail"><a href="#" class="ui-slider-handle"></a></div>')._uiSlider({range:"min",max:1,step:.05,value:n.prop("volume"),slide:function(e,t){e.originalEvent&&a.set(t.value)}})):(a=t(function(){var e=n.prop("volume");void 0!==e&&i.value(e)},function(){n.prop({muted:!1,volume:i.options.value})}),i=e.rangeUI({min:0,max:1,step:"any",input:function(){a.set()}}).data("rangeUi")),n.bind("volumechange",a.get)};o(i)}}),e.jme.registerPlugin("time-slider",{structure:d,pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(i,a,u){s();var l=this,d=function(){var o,d,c,m,p,p=e.jme.classNS+"has-duration";e.jme.classNS+"no-duration";var f=a.prop("duration");"jqueryui"==s.rangeType?(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{i._uiSlider("value",e)}catch(t){}},function(e){try{a.prop("currentTime",e).triggerHandler("timechanged",[e])}catch(t){}}),d=function(){f=a.prop("duration"),f&&isFinite(f)&&!isNaN(f)?(i._uiSlider("option","disabled",!1)._uiSlider("option","max",f),u.removeClass(l[n].no)):(i._uiSlider("option","disabled",!0),i._uiSlider("value",0),u.addClass(l[n].no))},i._uiSlider({range:r?!1:"min",step:.1,value:a.prop("currentTime"),slide:function(e,t){e.originalEvent&&o.set(t.value)}}),a.bind({timeupdate:o.get,emptied:function(){d(),i._uiSlider("value",0)},durationchange:d})):(o=t(function(){var e=a.prop("currentTime");if(!isNaN(e))try{c.value(e)}catch(t){}},function(){try{a.prop("currentTime",c.options.value).triggerHandler("timechanged",[c.options.value])}catch(e){}}),d=function(){f=a.prop("duration"),p=f&&isFinite(f)&&!isNaN(f),p?(c.disabled(!1),c.max(f),u.removeClass(l[n].no)):(c.disabled(!0),c.max(Number.MAX_VALUE),u.addClass(l[n].no))},c=i.rangeUI({min:0,value:a.prop("currentTime")||0,step:"any",input:function(){o.set()},textValue:function(e){return a.jmeFn("formatTime",e)}}).data("rangeUi"),m=e('<span class="'+e.jme.classNS+'time-select" />').appendTo(i),i.on({mouseenter:function(t){if(p){var n=(i.offset()||{left:0}).left,r=i.innerWidth(),s=function(e){var t=100*((e-n)/r);m.html(a.jmeFn("formatTime",f*t/100)).css({left:t+"%"})};s(t.pageX),m.addClass(e.jme.classNS+"show-time-select"),i.off(".jmetimeselect").on("mousemove.jmetimeselect",function(e){s(e.pageX)})}},mouseleave:function(){m.removeClass(e.jme.classNS+"show-time-select"),i.off(".jmetimeselect")}}),a.bind({timeupdate:o.get,emptied:function(){d(),c.value(0)},durationchange:d})),u.jmeFn("addControls",e('<div class="'+e.jme.classNS+'buffer-progress" />').prependTo(i)),d()};o(d)}}),e.jme.defineMethod("concerningRange",function(t,n){var i=this,a={start:0,end:0};if(t||(t="buffered"),t=e.prop(i,t),null==n&&(n=e.prop(i,"currentTime")),!(t&&"length"in t))return a;for(var r=0,s=t.length;s>r&&(a.start=t.start(r),a.end=t.end(r),!(n>=a.start&&a.end>=n));r++);return a}),e.jme.defineProp("progress",{get:function(t){var n=e.jme.data(t);if(!n.media)return 0;var i=100*(n.media.jmeFn("concerningRange").end/n.media.prop("duration"));return i>99.4&&(i=100),i||0},readonly:!0}),e.jme.registerPlugin("buffer-progress",{_create:function(t,n,i,a){var r=e('<div class="'+e.jme.classNS+'buffer-progress-indicator" />').appendTo(t),s=function(){var e=n.jmeProp("progress");a.progress!==e&&(a.progress=e,r.css("width",e+"%"))};n.bind({progress:s,emptied:function(){r.css("width",0),a.progress=0},playing:s}),s()}});var c={hh:6e4,mm:60,ss:1,ms:.001},m=function(t,n){var i;n||(n=["mm","ss"]),null==t&&(i=e.jme.data(this),t=e.prop(i.media,"duration")),t||(t=0);for(var a,r=[],s=0,o=n.length;o>s;s++)"ms"==n[s]&&s==o-1?a=Math.round(t/c[n[s]]/10):(a=parseInt(t/c[n[s]],10),t%=c[n[s]]),10>a&&(a="0"+a),r.push(a);return r.join(":")};e.jme.defineMethod("formatTime",m),e.jme.defineProp("format",{set:function(t,n){e.isArray(n)||(n=n.split(":"));var i=e.jme.data(t);return i.format=n,e(t).triggerHandler("updatetimeformat"),i.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("duration-display",{structure:l,options:{format:"mm:ss"},_create:function(e,t,n,i){"string"==typeof i.format&&(i.format=i.format.split(":"));var a=function(){e.html(m(t.prop("duration"),i.format))};t.bind("durationchange emptied",a),e.bind("updatetimeformat",a).jmeProp("format",i.format)}}),e.jme.defineProp("countdown",{set:function(t,n){var i=e.jme.data(t);return i.countdown=!!n,e(t).triggerHandler("updatetimeformat"),i.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("currenttime-display",{structure:l,options:{format:"mm:ss",countdown:!1},_create:function(e,t,n,i){"string"==typeof i.format&&(i.format=i.format.split(":"));var a=function(){var n=t.prop("currentTime");i.countdown&&(n=(t.prop("duration")||0)-n,.7>n&&(n=0)),e.html(m(n,i.format))};t.bind("timeupdate emptied durationchange",a),e.bind("updatetimeformat",a).jmeProp("format",i.format)}}),e.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(t,n){var i=function(){var i=n.prop("poster");i?t.html('<span></span><img src="'+i+'" class="'+e.jme.classNS+'poster-image" />'):t.empty()};n.bind("emptied",i),i()}})}(jQuery),function(e){var t;e.jme.startJME=function(){if(!t){var n;(n=e.webshims.modules)&&n["range-ui"]&&setTimeout(function(){e.fn.slider||e.webshims.loader.loadList(["range-ui"])},9),e(function(){e.jme.createSelectors(),e.jme.initJME(document,e([]))}),e.webshims.ready("mediaelement",function(){e.webshims.addReady(function(t,n){t!==document&&e.jme.initJME(t,n)})}),t=!0}}}(jQuery);