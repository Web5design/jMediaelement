(function(a){a.webshims=a.webshims||{ready:function(a,g){g()},addReady:function(f){a(function(){f(document,a([]))})}};var j=a.webshims;if(!window.Modernizr||!("opacity"in Modernizr))a("html").addClass(a.support.opacity?"opacity":"no-opacity");var h={},r={};a.jme={version:"2.0.2",classNS:"",options:{},plugins:{},data:function(f,g,b){f=a(f).data(i+"jme")||a.data(f,i+"jme",{});if(void 0===b)return g?f[g]:f;f[g]=b},registerPlugin:function(a,g){this.plugins[a]=g;if(!g.nodeName)g.nodeName="";if(!g.className)g.className=
a},defineMethod:function(a,g){r[a]=g},defineProp:function(f,g){if(!g.set)g.set=g.readonly?function(){throw f+" is readonly";}:a.noop;if(!g.get)g.get=function(b){return a.jme.data(b,f)};h[f]=g},prop:function(f,g,b){if(!h[g])return a.prop(f,g,b);if(void 0===b)return h[g].get(f);var d=h[g].set(f,b);void 0===d&&(d=b);"noDataSet"!=d&&a.jme.data(f,g,d)},setText:function(f,g){var b=f;f&&g&&(b={},b[f]=g);a.each(b,function(b,c){if(a.jme.plugins[b])a.jme.plugins[b].text=c})}};var s=!0;try{a.access(a(document.documentElement),
"t",void 0,!0,a.noop)}catch(u){s=!1}a.fn.jmeProp=s?function(f,g){return a.access(this,f,g,!0,a.jme.prop)}:function(f,g){return a.access(this,a.jme.prop,f,g,1<arguments.length)};a.fn.jmeFn=function(f){var g=Array.prototype.slice.call(arguments,1),b;this.each(function(){b=(r[f]||a.prop(this,f)).apply(this,g);if(void 0!==b)return!1});return void 0!==b?b:this};var l,m=[],i="";a.jme.createSelectors=function(){if(!l)i=a.jme.classNS,l="div."+i+"mediaplayer",a.each(a.jme.plugins,function(f,g){g.className=
i+g.className;g.selector=g.nodeName+"."+g.className;m.push(g.selector);i&&g.pseudoClasses&&a.each(g.pseudoClasses,function(a,d){g.pseudoClasses[a]=i+d})}),m=m.join(",")};a.jme.initJME=function(f,g){a("video, audio",f).add(g.filter("video, audio")).filter("[data-muted]").each(function(){a.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var b=a(this).data("volume");1>=b&&0<=b&&a.prop(this,"volume",b)});a(l,f).add(g.filter(l)).jmePlayer()};var o={emptied:1,pause:1};a.jme.getDOMList=
function(f){var g=[];f||(f=[]);"string"==typeof f&&(f=f.split(" "));a.each(f,function(a,d){d&&(d=document.getElementById(d))&&g.push(d)});return g};"labels"in document.createElement("input")||j.ready("dom-support",function(){j.defineNodeNamesProperty&&j.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var f=[],g=this.id;g&&(f=a('label[for="'+g+'"]'));f[0]||(f=a(this).closest("label",this.form));return f[0]?f.get():null},writeable:!1}})});
a.jme.getButtonText=function(f,g){var b=a("span.jme-text, +label span.jme-text",f),d=f.prop("labels");d&&(d=a(d));b[0]||(b=d||f);var c=b.text().split("/"),e=f.prop("title").split("/"),p,k,q,h;2==c.length&&(c[0]=c[0].trim(),c[1]=c[1].trim(),k=!0);2==e.length&&(e[0]=e[0].trim(),e[1]=e[1].trim(),q=!0);f.is('[type="checkbox"], [type="radio"]')?(f.prop("checked",function(){return this.defaultChecked}),p=!0):f.is("a")&&f.bind("click",function(a){a.preventDefault()});return function(e){h!==e&&(h=e,k&&b.text(c[e||
0]),q&&(f.prop("title",c[e||0]),d&&d.prop("title",c[e||0])),g&&f.removeClass(g[e?0:1]).addClass(g[e]),p&&(f.prop("checked",!!e),(f.data("checkboxradio")||{refresh:a.noop}).refresh()))}};a.fn.jmePlayer=function(f){var g=["idle","playing","ended","waiting","mediaerror"].map(function(a){return i+"state-"+a}).join(" ");return this.each(function(){f&&a.jme.data(this,a.extend(!0,{},f));var b=a("audio, video",this).filter(":first"),d=a(this),c=a(m,d),e=a.jme.getDOMList(a.jme.data(this,"controls")),c=c.add(a(e)),
e=a.jme.data(this),p=a.jme.data(b[0]),k,q,h,t,j,n,l;p.player=d;p.media=b;if(!e.media)q=!0,n=function(){b.unbind("canplay",j);clearTimeout(l)},j=function(){var b=a.prop(this,"paused")?"idle":"playing";d.removeClass(g).addClass(i+"state-"+b)},k=function(c){var c=c.type,e;n();if("ended"==c||a.prop(this,"ended"))c="ended";else if("updateJMEState"==c)c=a.prop(this,"readyState"),e=a.prop(this,"paused"),c=!e&&3>c?"waiting":!e&&2<c?"playing":"idle";else if("waiting"==c){if(2<a.prop(this,"readyState"))return;
l=setTimeout(function(){2<b.prop("readyState")&&j()},9);b.bind("canPlay",j)}else o[c]&&(c="idle");c&&d.removeClass(g).addClass(i+"state-"+c)},e.media=b,e.player=d,b.bind("ended",function(){n();b.jmeFn("pause");b.jmeFn("load")}).bind("emptied waiting playing ended pause mediaerror",k).bind("volumechange updateJMEState",function(){d[a.prop(this,"muted")?"addClass":"removeClass"](i+"state-muted")}).bind("emptied updateJMEState play playing waiting",function(b){var c;if("emptied"==b.type||"updateJMEState"==
b.type&&a.prop(this,"paused"))c="addClass";else if("play"==b.type||"waiting"==b.type||"playing"==b.type)c="removeClass";if(c)d[c](i+"state-initial")}),d.bind("useractive",function(){d.addClass(i+"useractive")}).bind("userinactive",{idletime:3500},function(){d.removeClass(i+"useractive")}).bind("focusin",function(){clearTimeout(h);d.addClass(i+"focusenter")}).bind("focusout",function(){clearTimeout(h);h=setTimeout(function(){d.removeClass(i+"focusenter")},1)}).bind("mouseenter focusin",function(){clearTimeout(t);
d.addClass(i+"fover")}).bind("mouseleave focusout",function(){clearTimeout(t);t=setTimeout(function(){d.removeClass(i+"fover")},1)});d.jmeFn("addControls",c);q&&(e.controlbar&&d.jmeProp("controlbar",!0),k&&b.bind("updateJMEState",k).triggerHandler("updateJMEState"))})};a.jme.defineProp("isPlaying",{get:function(f){return!a.prop(f,"ended")&&!a.prop(f,"paused")&&1<a.prop(f,"readyState")&&!a.data(f,"mediaerror")},readonly:!0});a.jme.defineProp("player",{get:function(){return a.jme.data(this,"player")||
null},readonly:!0});a.jme.defineProp("media",{get:function(){return a.jme.data(this,"media")||null},readonly:!0});a.jme.defineProp("srces",{get:function(f){var f=a.jme.data(f),g=f.media.prop("src"),b=[];return g?[{src:g}]:b=a.map(a("source",f.media).get(),function(b){var c={src:a.prop(b,"src")},e=a.attr(b,"media");if(e)c.media=e;if(e=a.attr(b,"type"))c.type=e;return c})},set:function(f,g){var b=a.jme.data(f),d=function(c,d){"string"==typeof d&&(d={src:d});a(document.createElement("source")).attr(d).appendTo(b.media)};
b.media.removeAttr("src").find("source").remove();a.isArray(g)?a.each(g,d):d(0,g);b.media.jmeFn("load");return"noDataSet"}});a.jme.defineMethod("togglePlay",function(){a(this).jmeFn(h.isPlaying.get(this)?"pause":"play")});a.jme.defineProp("controlbar",{set:function(f,g){var g=!!g,b=a.jme.data(f),d=a("div.jme-default-media-overlay, div.jme-default-control-bar",b.player),c=a.jme.plugins["media-controls"],e="";g&&!d[0]?b._controlbar?b._controlbar.appendTo(b.player):(b.media.prop("controls",!1),a.each(c.pluginOrder,
function(b,c){var d=a.jme.plugins[c];d&&d.structure?e+=d.structure.replace("{%class%}",i+c).replace("{%text%}",d.text||""):c&&-1!=c.indexOf("<")&&(e+=c)}),b._controlbar=a(c.barStructure),d=b._controlbar.find("div.jme-cb-box").addClass(i+"media-controls"),c=b._controlbar.filter("div.jme-default-media-overlay").addClass(i+"play-pause"),c=c.add(d),c=c.add(a(e).appendTo(d)),b._controlbar.appendTo(b.player),b.player.jmeFn("addControls",c)):g||d.detach();c=d=null;return g}});a.jme.defineMethod("addControls",
function(f){var g=a.jme.data(this)||{};g.media&&(f=a(f),a.each(a.jme.plugins,function(b,d){f.filter("."+d.className).add(f.find("."+d.className)).each(function(){var b=a(this),e=a.jme.data(this);e.player=g.player;e.media=g.media;if(!e.rendered)e.rendered=!0,d.options&&a.each(d.options,function(a,b){a in e||(e[a]=b)}),d._create(b,g.media,g.player,e),b=null})}),g.player.triggerHandler("controlsadded"))});a.jme.defineMethod("updateControlbar",function(){var f=a("."+a.jme.classNS+"time-slider",this);
if(f[0]&&"absolute"!==f.css("position")){var g=Math.floor(f.parent().width())-0.1,b=0;f.hide().siblings().each(function(){this!==f[0]&&"absolute"!==a.css(this,"position")&&"none"!==a.css(this,"display")&&(b+=Math.ceil(a(this).outerWidth(!0))+0.1)}).end().show();f.width(g-b-Math.ceil(f.outerWidth(!0)-f.width())-0.3)}});a.jme.registerPlugin("media-controls",{pluginOrder:'play-pause,<div class="media-bar">,currenttime-display,time-slider,duration-display,<div class="volume-controls">,mute-unmute,volume-slider,</div>,fullscreen,<div class="subtitle-controls">,captions,</div>,</div>'.split(","),
barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar"><div class="jme-cb-box"></div></div>',_create:function(f,g,b){var d,c=function(){clearTimeout(d);f.jmeFn("updateControlbar");d=setTimeout(function(){f.jmeFn("updateControlbar")},9)};setTimeout(function(){g.bind("loadedmetadata volumechange play pause ended emptied",c);b.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",c);a(window).bind("resize emchange",c)},1);c()}});(function(){var f=
{add:function(g,b,d){var c=a.data(g,"jmeuseractivity")||a.data(g,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),e=a(g),f=function(){if(!c.idle)c.idle=!0,c.trigger.userinactive&&e.trigger("userinactive")},k,h,g=function(a){if(a&&!("mousemove"===a.type&&a.pageX===k&&a.pageY===h)){if("mousemove"===a.type)k=a.pageX,h=a.pageY;c.idleTimer&&clearTimeout(c.idleTimer);c.idleTimer=setTimeout(f,c.idletime);if(c.idle)c.idle=!1,c.trigger.useractive&&e.trigger("useractive")}};c.idletime=(b||{}).idletime||
c.idletime;if(b&&"idle"in b)c.idle=b.idle;c.trigger[d]=!0;if(!c.bound)e.bind("mouseleave.jmeuseractivity",f).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",g),c.bound=!0;c.idle||g({type:"initunidled"})},remove:function(f,b){var d=a.data(f,"jmeuseractivity")||a.data(f,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});d.trigger[b]=!1;if(!d.trigger.useractive&&!d.trigger.userinactive)a(f).unbind(".jmeuseractivity"),
d.bound=!1}};a.each(["useractive","userinactive"],function(g,b){a.event.special[b]={setup:function(a){f.add(this,a,b)},teardown:function(){f.remove(this,b)}}})})()})(jQuery);
(function(a){function j(a,d){var c,e,f;return{get:function(){return f?void 0:a.apply(this,arguments)},set:function(){clearTimeout(c);clearTimeout(e);var a=this,b=arguments;f=!0;c=setTimeout(function(){d.apply(a,b);e=setTimeout(function(){f=!1},30)},0)}}}var h="pseudoClasses",r={play:1,playing:1},s={pause:1,ended:1},u=a.browser.msie&&8>parseFloat(a.browser.version,10),l=function(){a.webshims.loader&&(a.webshims.loader.loadList(["jquery-ui"]),a.webshims.modules["input-widgets"].src&&a.webshims.loader.loadList(["input-widgets"]))};
a.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"play / pause",_create:function(b,d){var c=a.jme.getButtonText(b,[this[h].play,this[h].pause]);d.bind("play playing ended pause updateJMEState",function(a){a=a.type;a=r[a]?1:s[a]?0:d.jmeProp("isPlaying")?1:0;c(a)}).triggerHandler("updateJMEState");b.bind(b.is("select")?"change":"click",
function(){d.jmeFn("togglePlay")})}});a.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"mute / unmute",_create:function(b,d){var c=a.jme.getButtonText(b,[this[h].mute,this[h].unmute]);d.bind("volumechange updateJMEState",function(){c(d.prop("muted")?1:0)}).triggerHandler("updateJMEState");b.bind(b.is("select")?"change":"click",function(){d.prop("muted",
!d.prop("muted"))})}});var m=function(b){var d=function(){if(!a.fn._uiSlider)!a.mobile||!a.mobile.slider?a.fn._uiSlider=a.fn.slider:a.widget("jme._uiSlider",a.ui.slider.prototype);b()};a.webshims.ready("jquery-ui",function(){!a.ui||!a.ui.slider?a.webshims.ready("input-widgets",d):d()})};a.jme.registerPlugin("volume-slider",{structure:'<div  class="{%class%}"></div>',_create:function(a,d){l();var c=j(function(){var c=d.prop("volume");void 0!==c&&a._uiSlider("value",c)},function(a){d.prop({muted:!1,
volume:a})});m(function(){a._uiSlider({range:"min",max:1,step:0.05,value:d.prop("volume"),slide:function(a,b){a.originalEvent&&c.set(b.value)}});d.bind("volumechange",c.get)})}});a.jme.registerPlugin("time-slider",{structure:'<div  class="{%class%}"></div>',pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(b,d,c){l();var e=this,f=j(function(){var a=d.prop("currentTime");if(!isNaN(a))try{b._uiSlider("value",a)}catch(c){}},function(a){try{d.prop("currentTime",a).triggerHandler("timechanged",
[a])}catch(b){}});c.jmeFn("addControls",a('<div class="'+a.jme.classNS+'buffer-progress" />').prependTo(b));m(function(){var a=d.prop("duration"),g=function(){(a=d.prop("duration"))&&isFinite(a)&&!isNaN(a)?(b._uiSlider("option","disabled",!1)._uiSlider("option","max",a),c.removeClass(e[h].no)):(b._uiSlider("option","disabled",!0),b._uiSlider("value",0),c.addClass(e[h].no))};b._uiSlider({range:u?!1:"min",step:0.1,value:d.prop("currentTime"),slide:function(a,b){a.originalEvent&&f.set(b.value)}});d.bind({timeupdate:f.get,
emptied:function(){g();b._uiSlider("value",0)},durationchange:g});g()})}});a.jme.defineMethod("concerningRange",function(b,d){var c={start:0,end:0};b||(b="buffered");b=a.prop(this,b);null==d&&(d=a.prop(this,"currentTime"));if(!b||!("length"in b))return c;for(var e=0,f=b.length;e<f&&!(c.start=b.start(e),c.end=b.end(e),c.start<=d&&c.end>=d);e++);return c});a.jme.defineProp("progress",{get:function(b){b=a.jme.data(b);if(!b.media)return 0;b=100*(b.media.jmeFn("concerningRange").end/b.media.prop("duration"));
99.4<b&&(b=100);return b||0},readonly:!0});a.jme.registerPlugin("buffer-progress",{_create:function(b,d,c,e){var f=a('<div class="'+a.jme.classNS+'buffer-progress-indicator" />').appendTo(b),b=function(){var a=d.jmeProp("progress");if(e.progress!==a)e.progress=a,f.css("width",a+"%")};d.bind({progress:b,emptied:function(){f.css("width",0);e.progress=0},playing:b});b()}});var i={hh:6E4,mm:60,ss:1,ms:0.0010},o=function(b,d){var c;d||(d=["mm","ss"]);null==b&&(c=a.jme.data(this),b=a.prop(c.media,"duration"));
b||(b=0);c=[];for(var e,f=0,g=d.length;f<g;f++)"ms"==d[f]&&f==g-1?e=Math.round(b/i[d[f]]/10):(e=parseInt(b/i[d[f]],10),b%=i[d[f]]),10>e&&(e="0"+e),c.push(e);return c.join(":")};a.jme.defineMethod("formatTime",o);a.jme.defineProp("format",{set:function(b,d){a.isArray(d)||(d=d.split(":"));var c=a.jme.data(b);c.format=d;a(b).triggerHandler("updatetimeformat");c.player.triggerHandler("updatetimeformat");return"noDataSet"}});a.jme.registerPlugin("duration-display",{structure:'<div  class="{%class%}"></div>',
options:{format:"mm:ss"},_create:function(a,d,c,e){if("string"==typeof e.format)e.format=e.format.split(":");c=function(){a.html(o(d.prop("duration"),e.format))};d.bind("durationchange emptied",c);a.bind("updatetimeformat",c).jmeProp("format",e.format)}});a.jme.defineProp("countdown",{set:function(b,d){var c=a.jme.data(b);c.countdown=!!d;a(b).triggerHandler("updatetimeformat");c.player.triggerHandler("updatetimeformat");return"noDataSet"}});a.jme.registerPlugin("currenttime-display",{structure:'<div  class="{%class%}"></div>',
options:{format:"mm:ss",countdown:!1},_create:function(a,d,c,e){if("string"==typeof e.format)e.format=e.format.split(":");c=function(){var c=d.prop("currentTime");e.countdown&&(c=(d.prop("duration")||0)-c,0.7>c&&(c=0));a.html(o(c,e.format))};d.bind("timeupdate emptied durationchange",c);a.bind("updatetimeformat",c).jmeProp("format",e.format)}});a.jme.fullscreen=function(){var b,d,c=document.documentElement,e={supportsFullScreen:Modernizr.prefixed("fullscreenEnabled",document,!1)||Modernizr.prefixed("fullScreenEnabled",
document,!1),isFullScreen:function(){return!1},requestFullScreen:function(c){b=[];a(c).parentsUntil("body").each(function(){var c=a.css(this,"position"),e=this.scrollLeft,f=this.scrollTop,g;d={elemStyle:this.style,elem:this};if("static"!==c)g=!0,d.pos=d.elemStyle.position,this.style.position="static";if(e)g=!0,d.left=e;if(f)g=!0,d.top=f;g&&b.push(d)});d=null},cancelFullScreen:function(){b&&a.each(b,function(a,b){if("pos"in b)b.elemStyle.position=b.pos;if(b.left)b.elem.scrollLeft=b.left;if(b.top)b.elem.scrollTop=
b.top})},eventName:"fullscreenchange",exitName:"exitFullscreen",requestName:"requestFullscreen",elementName:"fullscreenElement",enabledName:""};if(e.supportsFullScreen)e.enabledName=e.supportsFullScreen,e.exitName=Modernizr.prefixed("exitFullscreen",document,!1)||Modernizr.prefixed("cancelFullScreen",document,!1),e.elementName=Modernizr.prefixed("fullscreenElement",document,!1)||Modernizr.prefixed("fullScreenElement",document,!1),e.supportsFullScreen=!!e.supportsFullScreen,("fullscreenElement"!=e.elementName||
"exitFullscreen"!=e.exitName||"fullscreenEnabled"!=e.enabledName)&&a.each(Modernizr._domPrefixes,function(a,b){var d=b+"RequestFullscreen";if(d in c||(d=b+"RequestFullScreen")&&d in c)return e.eventName=b+"fullscreenchange",e.requestName=d,!1}),e.isFullScreen=function(){return document[e.elementName]},e.requestFullScreen=function(a){return a[e.requestName]()},e.cancelFullScreen=function(){return document[e.exitName]()};return e}();a.jme.defineProp("fullscreen",{set:function(b,d){var c=a.jme.data(b);
if(!c||!c.player)return"noDataSet";if(d){if(c.player.hasClass(a.jme.classNS+"player-fullscreen"))return"noDataSet";c.scrollPos={top:a(window).scrollTop(),left:a(window).scrollLeft()};a(document).unbind(".jmefullscreen").bind("keydown.jmefullscreen",function(a){if(27==a.keyCode)return c.player.jmeProp("fullscreen",!1),!1});try{a.jme.fullscreen.requestFullScreen(c.player[0])}catch(e){}a("html").addClass(a.jme.classNS+"has-media-fullscreen");c.player.addClass(a.jme.classNS+"player-fullscreen");c.media.addClass(a.jme.classNS+
"media-fullscreen");a.jme.fullscreen.supportsFullScreen&&a(document).bind(a.jme.fullscreen.eventName+".jmefullscreen",function(d){var e=a.jme.fullscreen.isFullScreen();e&&b==d.target?a(b).triggerHandler("playerdimensionchange",["fullscreen"]):e||c.player.jmeProp("fullscreen",!1)});c.player.triggerHandler("playerdimensionchange",["fullwindow"]);c.media.jmeFn("play")}else{if(!c.player.hasClass(a.jme.classNS+"player-fullscreen"))return"noDataSet";a(document).unbind(".jmefullscreen");a("html").removeClass(a.jme.classNS+
"has-media-fullscreen");c.player.removeClass(a.jme.classNS+"player-fullscreen");c.media.removeClass(a.jme.classNS+"media-fullscreen");try{a.jme.fullscreen.cancelFullScreen()}catch(f){}c.player.triggerHandler("playerdimensionchange");c.scrollPos&&(a(window).scrollTop(c.scrollPos.top),a(window).scrollLeft(c.scrollPos.left),delete c.scrollPos)}return"noDataSet"},get:function(b){if((b=a.jme.data(b))&&b.player)return!b.player.hasClass(a.jme.classNS+"player-fullscreen")?!1:a.jme.fullscreen.isFullScreen()||
"fullwindow"}});a.jme.registerPlugin("fullscreen",{pseudoClasses:{enter:"state-enterfullscreen",exit:"state-exitfullscreen"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"enter fullscreen / exit fullscreen",_create:function(b,d,c){var e=a.jme.getButtonText(b,[this[h].enter,this[h].exit]),d=function(){e(c.hasClass(a.jme.classNS+"player-fullscreen")?1:0)};c.bind("playerdimensionchange",d);b.bind(b.is("select")?"change":"click",
function(){c.jmeProp("fullscreen",!c.hasClass(a.jme.classNS+"player-fullscreen"))});d()}});a.jme.ButtonMenu=function(b,d,c){this.button=a(b).attr({"aria-haspopup":"true"});this.clickHandler=c;this.toggle=a.proxy(this,"toggle");this.keyIndex=a.proxy(this,"keyIndex");this._buttonClick=a.proxy(this,"_buttonClick");this.addMenu(d);this._closeFocusOut();this.button.bind("click",this.toggle)};a.jme.ButtonMenu.prototype={addMenu:function(b){this.menu&&this.menu.remove();this.menu=a(b);this.buttons=a("button",
this.menu);this.menu.insertAfter(this.button);this.menu.bind("keydown",this.keyIndex).delegate("button","click",this._buttonClick)},_closeFocusOut:function(){var a=this,d,c=function(){clearTimeout(d);setTimeout(function(){clearTimeout(d)},9)};this.menu.parent().bind("focusin",c).bind("mousedown",c).bind("focusout",function(){d=setTimeout(function(){a.hide()},40)})},_buttonClick:function(a){this.clickHandler(this.buttons.index(a.currentTarget),a.currentTarget);this.hide()},keyIndex:function(a){var d=
40==a.keyCode?1:38==a.keyCode?-1:0;if(d){var c=this.buttons.not(":disabled"),e=c.filter(":focus"),e=c[c.index(e)+d]||c.filter(0<d?":first":":last");e.focus();a.preventDefault()}},show:function(){if(!this.isVisible){var b=this.buttons.not(":disabled");this.isVisible=!0;this.menu.addClass("visible-menu");try{this.activeElement=document.activeElement||this.button[0]}catch(d){this.activeElement=this.button[0]}setTimeout(function(){a(b.filter('[aria-checked="true"]')[0]||b[0]).focus()},60)}},toggle:function(){this[this.isVisible?
"hide":"show"]()},hide:function(){if(this.isVisible){this.isVisible=!1;this.menu.removeClass("visible-menu");if(this.activeElement)try{this.activeElement.focus()}catch(a){}this.activeElement=!1}}};var f={subtitles:1,caption:1},g=function(b){return"<div><ul>"+a.map(b,function(a){var b="caption"==a.kind?"caption-type":"subtitle-type",e=a.language;return'<li class="'+b+'" role="presentation"><button role="menuitemcheckbox">'+a.label+(e?' <span class="track-lang">'+e+"</span>":"")+"</button></li>"}).join("")+
"</ul></div>"};a.jme.registerPlugin("captions",{pseudoClasses:{enabled:"state-captionsenabled",disabled:"state-captionsdisabled",noTrack:"no-track",hasTrack:"has-track",menu:"subtitle-menu"},structure:'<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',text:"subtitles menu",_create:function(b,d,c){var e=this,i=d.find("track"),j=a("span.jme-text, +label span.jme-text",b);j[0]||(j=b);j.html(e.text);i.length?c.addClass(e[h].hasTrack):(b.prop("disabled",
!0),c.addClass(e[h].noTrack));a.webshims.ready("track",function(){function i(c){k?k.addMenu(c):k=new a.jme.ButtonMenu(b,c,function(b,c){"true"==a.attr(c,"aria-checked")?n[b].mode="disabled":a.each(n,function(a,c){c.mode=a==b?"showing":"disabled"});d.prop("textTracks");j()});j()}function j(){a("button",k.menu).each(function(b){a.attr(this,"aria-checked","showing"==n[b].mode?"true":"false")})}function l(){n=[];a.each(m,function(a,b){f[b.kind]&&3!=b.readyState&&n.push(b)});if(n.length){if(i('<div class="'+
e[h].menu+'" >'+g(n)+"</div>"),!c.hasClass(e[h].hasTrack)||c.hasClass(e[h].noTrack))b.prop("disabled",!1),c.addClass(e[h].hasTrack).removeClass(e[h].noTrack).triggerHandler("controlschanged")}else if(!c.hasClass(e[h].noTrack)||c.hasClass(e[h].hasTrack))b.prop("disabled",!0),c.addClass(e[h].noTrack).removeClass(e[h].hasTrack).triggerHandler("controlschanged")}var k,n=[],m=d.prop("textTracks"),o=function(){var a,b;return function(c){clearTimeout(a);clearTimeout(b);"updatesubtitlestate"==c.type&&(b=
setTimeout(function(){d.trigger("updatetracklist")},0));a=setTimeout(l,19)}}();m?(l(),a([m]).on("addtrack removetrack",o),c.bind("updatesubtitlestate",o),d.bind("updatetrackdisplay",function(){var a;return function(){clearTimeout(a);a=setTimeout(j,20)}}())):(m=[],l())})}});a.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(b,d){var c=function(){var c=d.prop("poster");c?b.html('<span></span><img src="'+c+'" class="'+a.jme.classNS+'poster-image" />'):b.empty()};d.bind("emptied",
c);c()}})})(jQuery);(function(a){a(function(){a.jme.createSelectors();a.jme.blockInit||a.jme.initJME(document,a([]))});a.webshims.ready("mediaelement",function(){a.webshims.addReady(function(j,h){j!==document&&a.jme.initJME(j,h)})})})(jQuery);
